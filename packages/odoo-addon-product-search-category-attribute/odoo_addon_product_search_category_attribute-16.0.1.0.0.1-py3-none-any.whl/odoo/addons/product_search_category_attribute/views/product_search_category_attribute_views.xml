<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2024 Manuel Regidor <manuel.regidor@sygel.es>
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>

    <record id="product_search_cat_attr_form_view" model="ir.ui.view">
        <field name="name">product.search.cat.attr.form.view</field>
        <field name="model">product.search.cat.attr</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <label for="applied_category" />
                    <div name="delete_category">
                        <field
                            name="applied_category"
                            class="oe_inline text-break"
                            domain="[('parent_id', '=', applied_category)]"
                        />
                        <button
                            type='object'
                            class="fa fa-arrow-right oe_link"
                            name="delete_category"
                            string="Delete Category"
                            attrs="{'invisible':[('applied_category','=',False)]}"
                        />
                    </div>
                    <label for="category_id" />
                    <div name="apply_categoryy">
                        <field
                            name="category_id"
                            class="oe_inline text-break"
                            domain="[('parent_id', '=', applied_category)]"
                            options="{'no_create_edit': True, 'no_create': True, 'no_open': True}"
                        />
                        <button
                            type='object'
                            class="fa fa-arrow-right oe_link"
                            name="apply_category"
                            string="Apply Category"
                            attrs="{'invisible':[('category_id','=',False)]}"
                            help="Refresh the attributes that apply to the products in this category."
                        />
                    </div>
                </group>
                <field name="applied_category_ids">
                    <tree>
                        <field name="sequence" />
                        <field name="category_id" />
                    </tree>
                </field>
                <notebook>
                    <page
                        name="attributes"
                        string="Attributes"
                        attrs="{'invisible': [('attribute_line_ids', '=', [])]}"
                    >
                        <button
                            name="search_products"
                            string="Seach Products"
                            type="object"
                            help="Get the list of products that belong to the applied category and meet the attributes requirements."
                        />
                        <field name="attribute_line_ids">
                            <tree editable="bottom" create="false" delete="false">
                                <field
                                    name="attribute_id"
                                    options="{'no_create_edit': True, 'no_create': True, 'no_open': True}"
                                    force_save="1"
                                />
                                <field
                                    name="attribute_value_ids"
                                    widget="many2many_tags"
                                    force_save="1"
                                    options="{'no_create_edit': True, 'no_create': True, 'no_open': True}"
                                />
                            </tree>
                        </field>
                    </page>
                    <footer>
                        <button name="cancel" string="Cancel" special="cancel" />
                    </footer>
                </notebook>
            </form>
        </field>
    </record>

</odoo>
