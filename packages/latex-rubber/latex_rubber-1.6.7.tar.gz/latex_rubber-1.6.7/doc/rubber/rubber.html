<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Permission is granted to make and distribute verbatim
copies of this manual provided the copyright notice and
this permission notice are preserved on all copies.

Permission is granted to copy and distribute modified
versions of this manual under the conditions for
verbatim copying, provided also that the sections
entitled "Copying" and "GNU General Public License"
are included exactly as in the original, and provided
that the entire resulting derived work is distributed
under the terms of a permission notice identical to this
one.

Permission is granted to copy and distribute
translations of this manual into another language,
under the above conditions for modified versions,
except that this permission notice may be stated in a
translation approved by the Free Software Foundation.

Copyright © 2002-2006 Emmanuel Beffara.

Copyright © 2006-2015 Sebastian Kapfer. -->
<title>Rubber Manual 1.6.7</title>

<meta name="description" content="Rubber Manual 1.6.7">
<meta name="keywords" content="Rubber Manual 1.6.7">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="#Top" rel="start" title="Top">
<link href="#Introduction" rel="next" title="Introduction">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">






<div class="top-level-extent" id="Top">
<div class="nav-panel">
<p>
Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a> &nbsp; </p>
</div>
<h1 class="top" id="Rubber"><span>Rubber<a class="copiable-link" href="#Rubber"> &para;</a></span></h1>

<p>Rubber is a wrapper for LaTeX and companion programs. Its purpose is,
given a LaTeX source to process, to compile it enough times to resolve
all references, possibly running satellite programs such as BibTeX,
makeindex, Metapost, etc. to produce appropriate data files.
</p>

<ul class="mini-toc">
<li><a href="#Introduction" accesskey="1">Introduction</a></li>
<li><a href="#Invoking" accesskey="2">Command lines</a></li>
<li><a href="#Directives" accesskey="3">Directives</a></li>
<li><a href="#Modules" accesskey="4">Modules</a></li>
<li><a href="#Graphics" accesskey="5">Graphics conversion</a></li>
<li><a href="#Encoding" accesskey="6">Encoding issues</a></li>
<li><a href="#Index" accesskey="7">Index</a></li>
</ul>
<hr>
<div class="chapter-level-extent" id="Introduction">
<div class="nav-panel">
<p>
Next: <a href="#Invoking" accesskey="n" rel="next">Command lines</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Rubber</a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Introduction-1"><span>1 Introduction<a class="copiable-link" href="#Introduction-1"> &para;</a></span></h2>

<p>The purpose of Rubber is to make the building of a document automated, from
the source files to the final document file, replacing the work of a Makefile.
</p>
<p>The basis is a routine that compiles a LaTeX source the right number of times
to resolve all references and make all tables of contents, list of figures,
and so on. On top of that, Rubber provides a modular system to handle various
tasks needed apart from compilations. This, for instance, includes processing
bibliographic references or indices, as well as compilation or conversion of
figures. Additionally, modules can perform a post-processing of the document
(for instance to convert a DVI to PostScript or PDF) or even a preprocessing
(useful when the LaTeX source is generated by another program, like cweave).
</p>
<p>Dependency analysis is performed by parsing the source files, so that
modifying any source, user package, graphics file or other dependency leads to
appropriate compilations. Modules are triggered either explicitly using
command line options, or implicitly when the sources are parsed. For instance,
BibTeX support is activated whenever the source contains commands that
generate a bibliography, graphics support is activated by
<code class="code">\usepackage{graphics}</code> and similar commands, and so on. The modular
approach allows any additional feature to be supported by simply writing a
module to support it.
</p>
<p>Some information cannot be extracted from the LaTeX sources. This is the case,
for instance, with the search paths (which can be specified in environment
variables like <code class="env">TEXINPUTS</code>), or the style to be used with Makeindex. To
address this problem, one can add information for Rubber in the comments of
the LaTeX sources, see <a class="ref" href="#Directives">Directives</a>.
</p>
<p>The package comes with three different command line programs:
</p>
<dl class="table">
<dt><code class="command">rubber</code></dt>
<dd><p>Builds the specified documents completely. The source files may be either
LaTeX sources or documents in a format Rubber knows how to translate into
LaTeX.
</p></dd>
<dt><code class="command">rubber-pipe</code></dt>
<dd><p>Does the same for one document but it reads the LaTeX source from standard
input and dumps the compiled document on standard output.
</p></dd>
<dt><code class="command">rubber-info</code></dt>
<dd><p>This is a utility for extracting various kinds of information from a LaTeX
document, either from the source or from the compilation log files.
</p></dd>
</dl>



<hr>
</div>
<div class="chapter-level-extent" id="Invoking">
<div class="nav-panel">
<p>
Next: <a href="#rubber-command-line" accesskey="n" rel="next">Syntax for <code class="command">rubber</code> and <code class="command">rubber-pipe</code></a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Command-lines"><span>2 Command lines<a class="copiable-link" href="#Command-lines"> &para;</a></span></h2>

<p>The command line of each program is read using the GNU Getopt conventions.
<code class="command">rubber</code> and <code class="command">rubber-pipe</code> mostly have the same syntax.
</p>

<ul class="mini-toc">
<li><a href="#rubber-command-line" accesskey="1">Syntax for <code class="command">rubber</code> and <code class="command">rubber-pipe</code></a></li>
<li><a href="#rubber_002dinfo-command-line" accesskey="2">Syntax for <code class="command">rubber-info</code></a></li>
</ul>
<hr>
<div class="section-level-extent" id="rubber-command-line">
<div class="nav-panel">
<p>
Next: <a href="#rubber_002dinfo-command-line" accesskey="n" rel="next">Syntax for <code class="command">rubber-info</code></a>, Previous: <a href="#Invoking" accesskey="p" rel="prev">Command lines</a>, Up: <a href="#Invoking" accesskey="u" rel="up">Command lines</a> &nbsp; </p>
</div>
<h3 class="section" id="Syntax-for-rubber-and-rubber_002dpipe"><span>2.1 Syntax for <code class="command">rubber</code> and <code class="command">rubber-pipe</code><a class="copiable-link" href="#Syntax-for-rubber-and-rubber_002dpipe"> &para;</a></span></h3>

<p>The syntax of the command lines for <code class="command">rubber</code> and <code class="command">rubber-pipe</code>
are:
</p>
<div class="example">
<pre class="example-preformatted">rubber [options] files
rubber-pipe [options]
</pre></div>

<p>The source files may be either LaTeX sources (in which case the suffix
<samp class="file">.tex</samp> may be omitted) or documents in a format Rubber knows how to
translate into LaTeX.  This currently includes CWEB documents (filename
extension <samp class="file">.w</samp>, via <code class="command">cweave</code>), Literate Haskell (<samp class="file">.lhs</samp> via
<code class="command">lhs2tex</code>) and Knitr (<samp class="file">.Rtex</samp>).  If any compilation fails, the
whole process stops, including the compilation of the next documents on the
command line, and the program returns a non-zero exit code.
</p>
<p>The options are the following:
</p>
<dl class="table">
<dt><code class="command">-b</code></dt>
<dt><code class="command">--bzip2</code></dt>
<dd><p>Compress the final document (in <code class="command">bzip2</code> format). This option is
equivalent to saying <samp class="option">-o bzip2</samp> after all other options. It is
incompatible with the option <code class="command">--gzip</code>.
</p>
</dd>
<dt><code class="command">--clean</code></dt>
<dd><p>Remove all files produced by the compilation, instead of building the
document. This option is present in rubber only. It applies to the compilation
as it would be done with the other options of the command line, i.e. saying
</p><div class="example">
<pre class="example-preformatted">rubber --clean foo
</pre></div>
<p>will not delete foo.ps, while saying
</p><div class="example">
<pre class="example-preformatted">rubber --ps --clean foo
</pre></div>
<p>will.
</p>
</dd>
<dt><code class="command">-c &lt;command&gt;</code></dt>
<dt><code class="command">--command &lt;command&gt;</code></dt>
<dd><p>Execute the specified command (or directive) <em class="emph">before</em> parsing the source
files. See <a class="xref" href="#Directives">Directives</a>.
</p>
</dd>
<dt><code class="command">-e &lt;command&gt;</code></dt>
<dt><code class="command">--epilogue &lt;command&gt;</code></dt>
<dd><p>Execute the specified command (or directive) <em class="emph">after</em> parsing the source
fiels. See <a class="xref" href="#Directives">Directives</a>.
</p>
</dd>
<dt><code class="command">-f</code></dt>
<dt><code class="command">--force</code></dt>
<dd><p>Force at least one compilation of the source. This may be useful, for
instance, if some unusual dependency was modified (e.g. a package in a system
directory). This option is irrelevant in rubber-pipe.
</p>
</dd>
<dt><code class="command">-z</code></dt>
<dt><code class="command">--gzip</code></dt>
<dd><p>Compress the final document (in <code class="command">gzip</code> format). This option is
equivalent to saying <samp class="option">-o gz</samp> after all other options. It is
incompatible with the option <code class="command">--bzip2</code>.
</p>
</dd>
<dt><code class="command">-h</code></dt>
<dt><code class="command">--help</code></dt>
<dd><p>Display the list of all available options and exit nicely.
</p>
</dd>
<dt><code class="command">--inplace</code></dt>
<dd><p>Go to the directory of the source files before compiling, so that compilation
results are in the same place as their sources.
</p>
</dd>
<dt><code class="command">--into &lt;directory&gt;</code></dt>
<dd><p>Go to the specified directory before compiling, so that all files are produced
there and not in the current directory.
</p>
</dd>
<dt><code class="command">--jobname &lt;name&gt;</code></dt>
<dd><p>Specify a job name different from the base file name.
This changes the name of output files and only applies to the first target.
</p>
</dd>
<dt><code class="command">-k</code></dt>
<dt><code class="command">--keep</code></dt>
<dd><p>This option is for <code class="command">rubber-pipe</code> only. With this option, the temporary
files will not be removed after compiling the document and dumping the results
on standard output. The temporary document is named <samp class="file">rubtmpX.tex</samp>, where
<samp class="file">X</samp> is a number such that no file of that name exists initially.
</p>
</dd>
<dt><code class="command">-n &lt;num&gt;</code></dt>
<dt><code class="command">--maxerr &lt;num&gt;</code></dt>
<dd><p>Set the maximum number of displayed errors. By default, up to 10 errors are
reported, saying <samp class="option">-n -1</samp> displays all errors.
</p>
</dd>
<dt><code class="command">-m &lt;module&gt;[:&lt;args&gt;]</code></dt>
<dt><code class="command">--module &lt;module&gt;[:&lt;args&gt;]</code></dt>
<dd><p>Use the specified module in addition to the document&rsquo;s packages. Arguments
can be passed to the package by adding them after a colon, they correspond to
the package options in LaTeX. The module is loaded <em class="emph">before</em> parsing the
document&rsquo;s sources.
</p>
</dd>
<dt><code class="command">--only &lt;sources&gt;</code></dt>
<dd><p>Compile the document partially, including only the specified sources. This
works by inserting a call to <code class="command">\includeonly</code> on the command line. The
argument is a comma-separated list of file names.
</p>
</dd>
<dt><code class="command">-o &lt;module&gt;[:&lt;args&gt;]</code></dt>
<dt><code class="command">--post &lt;module&gt;[:&lt;args&gt;]</code></dt>
<dd><p>Used the specified module as a post-processor. This is similar to the
<samp class="option">-m</samp> options except that the module is loaded <em class="emph">after</em> parsing the
document.
</p>
</dd>
<dt><code class="command">-d</code></dt>
<dt><code class="command">--pdf</code></dt>
<dd><p>Produce PDF output. When this option comes after <samp class="option">--ps</samp> (for instance
in the form <samp class="option">-pd</samp>) it is  a  synonym  for <samp class="option">-o ps2pdf</samp>, otherwise
it acts as <samp class="option">-m pdftex</samp>, in order to use pdfLaTeX instead of LaTeX.
</p>
</dd>
<dt><code class="command">-p</code></dt>
<dt><code class="command">--ps</code></dt>
<dd><p>Process the DVI produced by the process through <code class="command">dvips</code> to produce a
PostScript document. This option is a synonym for <samp class="option">-e module dvips</samp>, it
cannot come after <samp class="option">--pdf</samp>.
</p>
</dd>
<dt><code class="command">-q</code></dt>
<dt><code class="command">--quiet</code></dt>
<dd><p>Suppress all messages during the process.
</p>
</dd>
<dt><code class="command">-r &lt;file&gt;</code></dt>
<dt><code class="command">--read &lt;file&gt;</code></dt>
<dd><p>Read additional directives form the specified file (see also the directive
<code class="command">read</code>).
</p>
</dd>
<dt><code class="command">-S</code></dt>
<dt><code class="command">--src-specials</code></dt>
<dd><p>Enable generation of source <code class="command">\special</code>s if the compiler supports it.
This is equivalent to setting the variable <code class="command">src-specials</code> to
&lsquo;<samp class="samp">yes</samp>&rsquo;.
</p>
</dd>
<dt><code class="command">-s</code></dt>
<dt><code class="command">--short</code></dt>
<dd><p>Display LaTeX&rsquo;s error messages in a compact form (one error per line).
</p>
</dd>
<dt><code class="command">--synctex</code></dt>
<dd><p>Enable SyncTeX support in the LaTeX run.
</p>
</dd>
<dt><code class="command">-I &lt;dir&gt;</code></dt>
<dt><code class="command">--texpath &lt;dir&gt;</code></dt>
<dd><p>Add the specified directory to the search path of TeX files.
</p>
</dd>
<dt><code class="command">--unsafe</code></dt>
<dd><p>Permit the document to invoke arbitrary external programs.  This is potentially
dangerous, only use this option for documents coming from a trusted source.
</p>
</dd>
<dt><code class="command">-v</code></dt>
<dt><code class="command">--verbose</code></dt>
<dd><p>Increase the verbosity level. The default level is 0, levels up to 3 exist.
Beware, saying <samp class="option">-vvv</samp> makes Rubber speak a lot.
</p>
</dd>
<dt><code class="command">--version</code></dt>
<dd><p>Print the version number and exit nicely.
</p>
</dd>
<dt><code class="command">-W &lt;type&gt;</code></dt>
<dt><code class="command">--warn &lt;type&gt;</code></dt>
<dd><p>Report warnings of the given type, if there was no compilation error. The
available types are:
</p><dl class="table">
<dt><samp class="option">boxes</samp></dt>
<dd><p>overfull and underfull boxes,
</p></dd>
<dt><samp class="option">refs</samp></dt>
<dd><p>undefined or multiply defined references,
</p></dd>
<dt><samp class="option">misc</samp></dt>
<dd><p>other warnings,
</p></dd>
<dt><samp class="option">all</samp></dt>
<dd><p>all of the above.
</p></dd>
</dl>
</dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="rubber_002dinfo-command-line">
<div class="nav-panel">
<p>
Next: <a href="#Directives" accesskey="n" rel="next">Directives</a>, Previous: <a href="#rubber-command-line" accesskey="p" rel="prev">Syntax for <code class="command">rubber</code> and <code class="command">rubber-pipe</code></a>, Up: <a href="#Invoking" accesskey="u" rel="up">Command lines</a> &nbsp; </p>
</div>
<h3 class="section" id="Syntax-for-rubber_002dinfo"><span>2.2 Syntax for <code class="command">rubber-info</code><a class="copiable-link" href="#Syntax-for-rubber_002dinfo"> &para;</a></span></h3>

<p>The command-line syntax for <code class="command">rubber-info</code> is the following:
</p>
<div class="example">
<pre class="example-preformatted">rubber-info [options] [action] source
</pre></div>

<p>The options are all those accepted by <code class="command">rubber</code> and
<code class="command">rubber-pipe</code>, as described in <a class="ref" href="#rubber-command-line">Syntax for <code class="command">rubber</code> and <code class="command">rubber-pipe</code></a>. The
<samp class="option">action</samp> specified what kind of information has to be extracted. At
most one such argument must be present on the command line, <samp class="option">--check</samp>
is assumed if none is present. The possible actions are:
</p>
<dl class="table">
<dt><code class="command">--boxes</code></dt>
<dd><p>Extracts from the log file the places in the source where bad boxes appeared
(these are the famous overfull and underfull <code class="code">\hbox</code> and <code class="code">\vbox</code>).
</p>
</dd>
<dt><code class="command">--check</code></dt>
<dd><p>Report errors if there are any, otherwise report undefined references if there
are any, otherwise list warnings and bad boxes. This is the default action.
</p>
</dd>
<dt><code class="command">--deps</code></dt>
<dd><p>Analyse the source files and produce a space-separated list of all the files
that the document depends on and that Rubber cannot rebuild.
</p>
</dd>
<dt><code class="command">--errors</code></dt>
<dd><p>Extract from the log file the list of errors that occured during the last
compilation.
</p>
</dd>
<dt><code class="command">-h</code></dt>
<dt><code class="command">--help</code></dt>
<dd><p>Display the list of all available options and exit nicely.
</p>
</dd>
<dt><code class="command">--refs</code></dt>
<dd><p>Report the list of undefined or multiply defined references (i.e. the
<code class="code">\ref</code>&rsquo;s that are not defined by one <code class="code">\label</code>).
</p>
</dd>
<dt><code class="command">--rules</code></dt>
<dd><p>Analyse the source files and produce a list of dependency rules. One rule is
produced for each intermediate target that would be made when running
<code class="command">rubber</code>. Rules are formatted in the style of Makefiles.
</p>
</dd>
<dt><code class="command">--version</code></dt>
<dd><p>Print the version number and exit nicely.
</p>
</dd>
<dt><code class="command">--warnings</code></dt>
<dd><p>Stupidly enumerate all LaTeX warnings, i.e. all the lines in the log file that
contain the string &quot;Warning&quot;.
</p></dd>
</dl>



<hr>
</div>
</div>
<div class="chapter-level-extent" id="Directives">
<div class="nav-panel">
<p>
Next: <a href="#General-directives" accesskey="n" rel="next">General directives</a>, Previous: <a href="#rubber_002dinfo-command-line" accesskey="p" rel="prev">Syntax for <code class="command">rubber-info</code></a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Directives-1"><span>3 Directives<a class="copiable-link" href="#Directives-1"> &para;</a></span></h2>

<p>Some information cannot be extracted from the LaTeX sources. To address this
problem, one can add information for Rubber in the comments of the LaTeX
sources, in the form of directives. A directive is a line like
</p>
<div class="example">
<pre class="example-preformatted">% rubber: cmd args
</pre></div>

<p>The line must begin with a &lsquo;<samp class="samp">%</samp>&rsquo;, then any sequence of &lsquo;<samp class="samp">%</samp>&rsquo; signs and
spaces, then the text &lsquo;<samp class="samp">rubber:</samp>&rsquo; followed by zero or more spaces and a
directive name, possibly followed by spaces and arguments.
</p>
<p>The argument in the directive line are separated by spaces, single and double
quotes allow escaping of spaces (and quotes). The directive can contain
variable references with the syntax &lsquo;<samp class="samp">$VAR</samp>&rsquo; or &lsquo;<samp class="samp">${VAR}</samp>&rsquo;. For
details on the use of variables, see <a class="ref" href="#Variables">Variables</a>.
</p>
<p>If a directive name has the form &lsquo;<samp class="samp">foo.bar</samp>&rsquo;, it is considered a command
<code class="command">bar</code> for the module <code class="command">foo</code>. If this module is not registered
when the directive is found, then the directive is silently ignored. See the
individual documentation for modules for module-specific directives.
</p>

<ul class="mini-toc">
<li><a href="#General-directives" accesskey="1">General directives</a></li>
<li><a href="#Variables" accesskey="2">Variables</a></li>
</ul>
<hr>
<div class="section-level-extent" id="General-directives">
<div class="nav-panel">
<p>
Next: <a href="#Variables" accesskey="n" rel="next">Variables</a>, Previous: <a href="#Directives" accesskey="p" rel="prev">Directives</a>, Up: <a href="#Directives" accesskey="u" rel="up">Directives</a> &nbsp; </p>
</div>
<h3 class="section" id="General-directives-1"><span>3.1 General directives<a class="copiable-link" href="#General-directives-1"> &para;</a></span></h3>

<dl class="ftable">
<dt><a id="index-alias-_003cname1_003e-_003cname2_003e"></a><span><code class="command">alias &lt;name1&gt; &lt;name2&gt;</code><a class="copiable-link" href="#index-alias-_003cname1_003e-_003cname2_003e"> &para;</a></span></dt>
<dd><p>Pretend that the LaTeX macro &lsquo;<samp class="samp">name1</samp>&rsquo; is equivalent to &lsquo;<samp class="samp">name2</samp>&rsquo;. This
can be useful when defining wrappers around supported macros, like:
</p><div class="example">
<pre class="example-preformatted">% rubber: alias ig includegraphics
\newcommand\ig[1]{\includegraphics[scale=.5]{#1}}
</pre></div>

</dd>
<dt><a id="index-clean-_003cfile_003e"></a><span><code class="command">clean &lt;file&gt;</code><a class="copiable-link" href="#index-clean-_003cfile_003e"> &para;</a></span></dt>
<dd><p>Indicates that the specified file should be removed when cleaning using
<samp class="option">--clean</samp>.
</p>
</dd>
<dt><a id="index-depend-_003cfile_003e"></a><span><code class="command">depend &lt;file&gt;</code><a class="copiable-link" href="#index-depend-_003cfile_003e"> &para;</a></span></dt>
<dd><p>Consider the specified file as a dependency, so that its modification time
will be checked.
</p>
</dd>
<dt><a id="index-make-_003cfile_003e-_005b_003coptions_003e_005d"></a><span><code class="command">make &lt;file&gt; [&lt;options&gt;]</code><a class="copiable-link" href="#index-make-_003cfile_003e-_005b_003coptions_003e_005d"> &para;</a></span></dt>
<dd><p>Declare that the specified file has to be generated. Options can specify the
way it should be produced, the available options are <code class="command">from &lt;file&gt;</code> to
specify the source and <code class="command">with &lt;rule&gt;</code> to specify the conversion rule.
For instance, saying
</p><div class="example">
<pre class="example-preformatted">% rubber: make foo.pdf from foo.eps
</pre></div>
<p>indicates that <samp class="file">foo.pdf</samp> should be produced from <samp class="file">foo.eps</samp>, with any
conversion rule that can do it.
</p>
</dd>
<dt><a id="index-module-_003cmodule_003e-_005b_003coptions_003e_005d"></a><span><code class="command">module &lt;module&gt; [&lt;options&gt;]</code><a class="copiable-link" href="#index-module-_003cmodule_003e-_005b_003coptions_003e_005d"> &para;</a></span></dt>
<dd><p>Loads the specified module, possibly with options. This is equivalent to
the command-line option <code class="command">--module</code>.
</p>
</dd>
<dt><a id="index-onchange-_003cfile_003e-_003ccommand_003e"></a><span><code class="command">onchange &lt;file&gt; &lt;command&gt;</code><a class="copiable-link" href="#index-onchange-_003cfile_003e-_003ccommand_003e"> &para;</a></span></dt>
<dd><p>Execute the specified shell command after compiling if the contents of the
specified file have changed. In case the file or command contains
spaces, they must be enclosed within double or single quotes.
</p>
</dd>
<dt><a id="index-path-_003cdirectory_003e"></a><span><code class="command">path &lt;directory&gt;</code><a class="copiable-link" href="#index-path-_003cdirectory_003e"> &para;</a></span></dt>
<dd><p>Adds the specified directory to the search path for TeX (and Rubber). The
name of the directory is everything that follows the spaces after
&lsquo;<samp class="samp">path</samp>&rsquo;.
</p>
</dd>
<dt><a id="index-produce-_003cfile_003e"></a><span><code class="command">produce &lt;file&gt;</code><a class="copiable-link" href="#index-produce-_003cfile_003e"> &para;</a></span></dt>
<dd><p>Declares that the LaTeX run will create or update the specified file(s).
This implies that Rubber will check if the file contents changed and re-make
other files derived from it; it also implies that rubber &ndash;clean will
remove the indicated file.  <code class="command">produce</code> may be combined with <code class="command">watch</code>.
For example, Rubber&rsquo;s built-in behavior of recompiling the main LaTeX source
until the auxiliary file&rsquo;s contents no longer changes may be achieved using
</p><div class="example">
<pre class="example-preformatted">    produce document.aux
    watch document.aux
</pre></div>

</dd>
<dt><a id="index-read-_003cfile_003e"></a><span><code class="command">read &lt;file&gt;</code><a class="copiable-link" href="#index-read-_003cfile_003e"> &para;</a></span></dt>
<dd><p>Read the specified file of directives. The file must contain one directive per
line. Empty lines and lines that begin with &lsquo;<samp class="samp">%</samp>&rsquo; are ignored.
</p>
</dd>
<dt><a id="index-rules-_003cfile_003e"></a><span><code class="command">rules &lt;file&gt;</code><a class="copiable-link" href="#index-rules-_003cfile_003e"> &para;</a></span></dt>
<dd><p>Read extra conversion rules from the specified file. The format of this file
is the same as that of <samp class="file">rules.ini</samp>, see <a class="ref" href="#rules_002eini">Syntax of <code class="command">rules.ini</code></a>.
</p>
</dd>
<dt><a id="index-set-_003cname_003e-_003cvalue_003e"></a><span><code class="command">set &lt;name&gt; &lt;value&gt;</code><a class="copiable-link" href="#index-set-_003cname_003e-_003cvalue_003e"> &para;</a></span></dt>
<dd><p>Set the value of a variable as a string. For details on the existing variables
and their meaning, see <a class="ref" href="#Variables">Variables</a>.
</p>
</dd>
<dt><a id="index-setlist-_003cname_003e-_003cvalues_003e"></a><span><code class="command">setlist &lt;name&gt; &lt;values&gt;</code><a class="copiable-link" href="#index-setlist-_003cname_003e-_003cvalues_003e"> &para;</a></span></dt>
<dd><p>Set the value of a variable as a list of strings. The list is space-separated,
possibly empty. For details on the existing variables and their meaning, see
<a class="ref" href="#Variables">Variables</a>.
</p>
</dd>
<dt><a id="index-shell_005fescape"></a><span><code class="command">shell_escape</code><a class="copiable-link" href="#index-shell_005fescape"> &para;</a></span></dt>
<dd><p>Mark the document as requiring external programs (shell-escape or write18).
Rubber does not actually enable this unless called with the option
<samp class="option">--unsafe</samp>.
</p>
</dd>
<dt><a id="index-synctex"></a><span><code class="command">synctex</code><a class="copiable-link" href="#index-synctex"> &para;</a></span></dt>
<dd><p>Enable SyncTeX support in the LaTeX run.
</p>
</dd>
<dt><a id="index-watch-_003cfile_003e"></a><span><code class="command">watch &lt;file&gt;</code><a class="copiable-link" href="#index-watch-_003cfile_003e"> &para;</a></span></dt>
<dd><p>Watch the specified file for changes. If the contents of this file has
changed after a compilation, then another compilation is triggered. This is
useful in the case of tables of contents, for instance.
</p></dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="Variables">
<div class="nav-panel">
<p>
Next: <a href="#Modules" accesskey="n" rel="next">Modules</a>, Previous: <a href="#General-directives" accesskey="p" rel="prev">General directives</a>, Up: <a href="#Directives" accesskey="u" rel="up">Directives</a> &nbsp; </p>
</div>
<h3 class="section" id="Variables-1"><span>3.2 Variables<a class="copiable-link" href="#Variables-1"> &para;</a></span></h3>

<p>The following variables are defined by Rubber (or its modules) and used by
various modules to influence compilation. All variables are strings that
should be defined by the <code class="code">set</code> directive, unless explicitly specified.
</p>
<dl class="table">
<dt><code class="command">arguments (list)</code></dt>
<dd><p>Extra command-line arguments that are passed to the compiler. Note that this
is potentially dangerous and has no reason to be portable across different
compilers. This variable contains a list of strings, it should be set using
the <code class="code">setlist</code> directive.
</p>
</dd>
<dt><code class="command">engine</code></dt>
<dd><p>Deprecated.  Please use a module to change the compiler, as described in
<a class="ref" href="#Compiler-choice">Changing compilers</a>.
</p>
</dd>
<dt><code class="command">file</code></dt>
<dd><p>Deprecated.
The name of the current file (this is set during parsing).
</p>
</dd>
<dt><code class="command">job</code></dt>
<dd><p>The job name of the document, with no path indication.
Note that changing the value of this variable does not affect compilation; in
order to actually change the job name, use the command line option
<samp class="option">--jobname</samp>.
</p>
</dd>
<dt><code class="command">logfile_limit</code></dt>
<dd><p>Specify how much of the LaTeX logfile Rubber reads.
The default is 1 MB, which should be ample for any real document.
</p>
</dd>
<dt><code class="command">line</code></dt>
<dd><p>Deprecated.
The current line number in the current file (this is set during parsing).
</p>
</dd>
<dt><code class="command">src-specials</code></dt>
<dd><p>The kind of source <code class="command">\special</code>s that should be generated. When empty
(which is the case by default), no <code class="command">\special</code>s are generated. When set
to &lsquo;<samp class="samp">yes</samp>&rsquo;, the default set is generated, otherwise the variable is passed
as the argument of the <code class="command">-src-specials</code> switch of the compiler.
</p>
</dd>
</dl>


<hr>
</div>
</div>
<div class="chapter-level-extent" id="Modules">
<div class="nav-panel">
<p>
Next: <a href="#Packages" accesskey="n" rel="next">Supported Packages</a>, Previous: <a href="#Variables" accesskey="p" rel="prev">Variables</a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Modules-1"><span>4 Modules<a class="copiable-link" href="#Modules-1"> &para;</a></span></h2>


<ul class="mini-toc">
<li><a href="#Packages" accesskey="1">Supported Packages</a></li>
<li><a href="#Post_002dprocessing" accesskey="2">Post-processors</a></li>
<li><a href="#Compiler-choice" accesskey="3">Changing compilers</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Packages">
<div class="nav-panel">
<p>
Next: <a href="#BibLaTeX" accesskey="n" rel="next">BibLaTeX support</a>, Previous: <a href="#Modules" accesskey="p" rel="prev">Modules</a>, Up: <a href="#Modules" accesskey="u" rel="up">Modules</a> &nbsp; </p>
</div>
<h3 class="section" id="Supported-Packages"><span>4.1 Supported Packages<a class="copiable-link" href="#Supported-Packages"> &para;</a></span></h3>

<p>For every package that a document uses, Rubber looks for a module of
the same name to perform the tasks that this package my require apart
from the compilation by LaTeX. Modules can be added to the ones provided by
default to include new features (this is the point of the module system). The
standard modules are the following:
</p>
<dl class="vtable">
<dt><a id="index-asymptote"></a><span><code class="command">asymptote</code><a class="copiable-link" href="#index-asymptote"> &para;</a></span></dt>
<dd><p>Process the <code class="code">.asy</code> files generated by the LaTeX package, then
triggers a recompilation.
</p>
</dd>
<dt><a id="index-beamer"></a><span><code class="command">beamer</code><a class="copiable-link" href="#index-beamer"> &para;</a></span></dt>
<dd><p>This module handles Beamer&rsquo;s extra files the same way as other tables
of contents.
</p>
</dd>
<dt><a id="index-biblatex"></a><span><code class="command">biblatex</code><a class="copiable-link" href="#index-biblatex"> &para;</a></span></dt>
<dd><p>Takes care of processing the document&rsquo;s bibliographies with Biber or BibTeX
when needed.  For details, see <a class="ref" href="#BibLaTeX">BibLaTeX support</a>.
</p>
</dd>
<dt><a id="index-bibtex"></a><span><code class="command">bibtex</code><a class="copiable-link" href="#index-bibtex"> &para;</a></span></dt>
<dt><a id="index-bibtopic"></a><span><code class="command">bibtopic</code><a class="copiable-link" href="#index-bibtopic"> &para;</a></span></dt>
<dt><a id="index-multibib"></a><span><code class="command">multibib</code><a class="copiable-link" href="#index-multibib"> &para;</a></span></dt>
<dd><p>Takes care of processing the document&rsquo;s bibliographies with BibTeX when
needed. The <code class="command">bibtex</code> module is automatically loaded if the document
contains the macro <code class="code">\bibliography</code>. For details, see <a class="ref" href="#BibTeX">BibTeX support</a>.
</p>
</dd>
<dt><a id="index-combine"></a><span><code class="command">combine</code><a class="copiable-link" href="#index-combine"> &para;</a></span></dt>
<dd><p>The combine package is used to gather several LaTeX documents into a single
one, and this module handles the dependencies in this case.
</p>
</dd>
<dt><a id="index-epsfig"></a><span><code class="command">epsfig</code><a class="copiable-link" href="#index-epsfig"> &para;</a></span></dt>
<dd><p>This modules handles graphics inclusion for the documents that use the old
style <code class="code">\psfig</code> macro. It is actually an interface for the graphics
system, for details see <a class="ref" href="#Graphics">Graphics conversion</a>.
</p>
</dd>
<dt><a id="index-glossaries"></a><span><code class="command">glossaries</code><a class="copiable-link" href="#index-glossaries"> &para;</a></span></dt>
<dd><p>Run <code class="code">makeglossaries</code> and recompiles when the <code class="code">.glo</code> file changes.
</p>
</dd>
<dt><a id="index-graphics"></a><span><code class="command">graphics</code><a class="copiable-link" href="#index-graphics"> &para;</a></span></dt>
<dt><a id="index-graphicx"></a><span><code class="command">graphicx</code><a class="copiable-link" href="#index-graphicx"> &para;</a></span></dt>
<dd><p>These modules identify the graphics included in the document and consider them
as dependencies for compilation. They also use standard rules to build these
files with external programs. For more details, see <a class="ref" href="#Graphics">Graphics conversion</a>.
</p>
</dd>
<dt><a id="index-hyperref"></a><span><code class="command">hyperref</code><a class="copiable-link" href="#index-hyperref"> &para;</a></span></dt>
<dd><p>Handle the extra files that this package produces in some cases.
</p>
</dd>
<dt><a id="index-index"></a><span><code class="command">index</code><a class="copiable-link" href="#index-index"> &para;</a></span></dt>
<dt><a id="index-makeidx"></a><span><code class="command">makeidx</code><a class="copiable-link" href="#index-makeidx"> &para;</a></span></dt>
<dt><a id="index-nomencl"></a><span><code class="command">nomencl</code><a class="copiable-link" href="#index-nomencl"> &para;</a></span></dt>
<dd><p>Process the document&rsquo;s indexes with <code class="command">makeindex</code> when needed. For
details, see <a class="ref" href="#Indexing">Index generation</a>.
</p>
</dd>
<dt><a id="index-minitoc"></a><span><code class="command">minitoc</code><a class="copiable-link" href="#index-minitoc"> &para;</a></span></dt>
<dt><a id="index-minitoc_002dhyper"></a><span><code class="command">minitoc-hyper</code><a class="copiable-link" href="#index-minitoc_002dhyper"> &para;</a></span></dt>
<dd><p>On cleaning, remove additional files that produced to make partial tables of
contents.
</p>
</dd>
<dt><a id="index-moreverb"></a><span><code class="command">moreverb</code><a class="copiable-link" href="#index-moreverb"> &para;</a></span></dt>
<dt><a id="index-verbatim"></a><span><code class="command">verbatim</code><a class="copiable-link" href="#index-verbatim"> &para;</a></span></dt>
<dd><p>Adds the files included with <code class="code">\verbatiminput</code> and similar macros to the
list of dependencies.
</p>
</dd>
<dt><a id="index-ltxtable"></a><span><code class="command">ltxtable</code><a class="copiable-link" href="#index-ltxtable"> &para;</a></span></dt>
<dd><p>Add dependencies for files inserted via the <code class="code">ltxtable</code> LaTeX package.
</p>
</dd>
<dt><a id="index-xr"></a><span><code class="command">xr</code><a class="copiable-link" href="#index-xr"> &para;</a></span></dt>
<dd><p>Add additional <samp class="file">.aux</samp> files used for external references to the list of
dependencies, so recompiling is automatic when refer- enced document are
changed.
</p></dd>
</dl>


<ul class="mini-toc">
<li><a href="#BibLaTeX" accesskey="1">BibLaTeX support</a></li>
<li><a href="#BibTeX" accesskey="2">BibTeX support</a></li>
<li><a href="#Indexing" accesskey="3">Index generation</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="BibLaTeX">
<div class="nav-panel">
<p>
Next: <a href="#BibTeX" accesskey="n" rel="next">BibTeX support</a>, Previous: <a href="#Packages" accesskey="p" rel="prev">Supported Packages</a>, Up: <a href="#Packages" accesskey="u" rel="up">Supported Packages</a> &nbsp; </p>
</div>
<h4 class="subsection" id="BibLaTeX-support"><span>4.1.1 BibLaTeX support<a class="copiable-link" href="#BibLaTeX-support"> &para;</a></span></h4>

<p>If the document loads the package <code class="code">biblatex</code>, Rubber enables
BibLaTeX support.  Rubber will extract the appropriate external bibliography
tool such as <code class="command">biber</code> or <code class="command">bibtex</code> from the <code class="code">backend</code>
option to the <code class="code">biblatex</code> package and invoke it as needed.
</p>
<dl class="ftable">
<dt><a id="index-biblatex_002epath-_003cdirectory_003e"></a><span><code class="command">biblatex.path &lt;directory&gt;</code><a class="copiable-link" href="#index-biblatex_002epath-_003cdirectory_003e"> &para;</a></span></dt>
<dd><p>Add the specified directory to the seach path for BibTeX database files
(<samp class="file">.bib</samp> files).  The directory will be passed down to the bibliography
tool in the environment variable <code class="command">BIBINPUTS</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="BibTeX">
<div class="nav-panel">
<p>
Next: <a href="#Indexing" accesskey="n" rel="next">Index generation</a>, Previous: <a href="#BibLaTeX" accesskey="p" rel="prev">BibLaTeX support</a>, Up: <a href="#Packages" accesskey="u" rel="up">Supported Packages</a> &nbsp; </p>
</div>
<h4 class="subsection" id="BibTeX-support"><span>4.1.2 BibTeX support<a class="copiable-link" href="#BibTeX-support"> &para;</a></span></h4>

<p>If the document contains a call to <code class="code">\bibliography</code> or
<code class="code">\bibliographystyle</code>, then the BibTeX module is used. This triggers the
execution of BibTeX between compilations when new references are made,
bibliographies are changed, and in other appropriate cases. The following
directives may be used to control BibTeX&rsquo;s behaviour:
</p>
<dl class="ftable">
<dt><a id="index-bibtex_002ecrossrefs-_003cnumber_003e"></a><span><code class="command">bibtex.crossrefs &lt;number&gt;</code><a class="copiable-link" href="#index-bibtex_002ecrossrefs-_003cnumber_003e"> &para;</a></span></dt>
<dd><p>Set the minimum number of <code class="command">crossref</code> required for automatic inclusion
of the referenced entry in the citation list. This sets the option
<code class="command">-min-crossrefs</code> when calling <code class="command">bibtex</code>.
</p>
</dd>
<dt><a id="index-bibtex_002epath-_003cdirectory_003e"></a><span><code class="command">bibtex.path &lt;directory&gt;</code><a class="copiable-link" href="#index-bibtex_002epath-_003cdirectory_003e"> &para;</a></span></dt>
<dd><p>Add the specified directory to the seach path for BibTeX database files
(<samp class="file">.bib</samp> files).  The directory will be passed down to the bibliography
tool in the environment variable <code class="command">BIBINPUTS</code>.
</p>
</dd>
<dt><a id="index-bibtex_002estylepath-_003cdirectory_003e"></a><span><code class="command">bibtex.stylepath &lt;directory&gt;</code><a class="copiable-link" href="#index-bibtex_002estylepath-_003cdirectory_003e"> &para;</a></span></dt>
<dd><p>Add the specified directory  to  the  search  path  for  BibTeX style files
(<samp class="file">.bst</samp> files).
</p>
</dd>
<dt><a id="index-bibtex_002etool-_003ccommand_003e"></a><span><code class="command">bibtex.tool &lt;command&gt;</code><a class="copiable-link" href="#index-bibtex_002etool-_003ccommand_003e"> &para;</a></span></dt>
<dd><p>Call the specified command instead of <code class="command">bibtex</code> to process the .aux file,
for example <code class="command">bibtex8</code>.
</p></dd>
</dl>

<p>Multiple bibliographies can be handled by the <code class="command">multibib</code> package. The
directives provided by the <code class="command">multibib</code> module are the same as those of
the <code class="command">bibtex</code> module, and they may be used with an optional first
arument of the form &lsquo;<samp class="samp">(foo,bar,quux)</samp>&rsquo; in order to specify that the
directive only applies to the bibliographies named &lsquo;<samp class="samp">foo</samp>&rsquo;, &lsquo;<samp class="samp">bar</samp>&rsquo; and
&lsquo;<samp class="samp">quux</samp>&rsquo;. By default, directives are applied to all bibliographies.
</p>
<hr>
</div>
<div class="subsection-level-extent" id="Indexing">
<div class="nav-panel">
<p>
Next: <a href="#Post_002dprocessing" accesskey="n" rel="next">Post-processors</a>, Previous: <a href="#BibTeX" accesskey="p" rel="prev">BibTeX support</a>, Up: <a href="#Packages" accesskey="u" rel="up">Supported Packages</a> &nbsp; </p>
</div>
<h4 class="subsection" id="Index-generation"><span>4.1.3 Index generation<a class="copiable-link" href="#Index-generation"> &para;</a></span></h4>

<p>The use of the packages <code class="command">index</code>, <code class="command">makeidx</code> and
<code class="command">nomencl</code> triggers the
generation of an index (or several of them). Currently Rubber can use either
the standard Makeindex or the more sophisticated Xindy. The following
directives may be used to control how indices are generated:
</p>
<dl class="ftable">
<dt><a id="index-index_002etool-_003cname_003e"></a><span><code class="command">index.tool &lt;name&gt;</code><a class="copiable-link" href="#index-index_002etool-_003cname_003e"> &para;</a></span></dt>
<dd><p>Specifies which tool is to be used to process the index. The currently
supported tools are <code class="command">makeindex</code> (the default choice) and
<code class="command">xindy</code>.
</p>
</dd>
<dt><a id="index-index_002elanguage-_003clanguage_003e"></a><span><code class="command">index.language &lt;language&gt;</code><a class="copiable-link" href="#index-index_002elanguage-_003clanguage_003e"> &para;</a></span></dt>
<dd><p>Selects the language used for sorting the index. This only applies when
using <code class="command">xindy</code> as the indexing tool.
</p>
</dd>
<dt><a id="index-index_002emodules-_003cmodule_003e_002e_002e_002e"></a><span><code class="command">index.modules &lt;module&gt;...</code><a class="copiable-link" href="#index-index_002emodules-_003cmodule_003e_002e_002e_002e"> &para;</a></span></dt>
<dd><p>Specify which modules to use when processing an index with <code class="command">xindy</code>.
</p>
</dd>
<dt><a id="index-index_002eorder-_003coptions_003e"></a><span><code class="command">index.order &lt;options&gt;</code><a class="copiable-link" href="#index-index_002eorder-_003coptions_003e"> &para;</a></span></dt>
<dd><p>Modifies the sorting options for the index. The argument must be a
space-separated list of words among &lsquo;<samp class="samp">standard</samp>&rsquo;, &lsquo;<samp class="samp">german</samp>&rsquo; and
&lsquo;<samp class="samp">letter</samp>&rsquo;. his only applies when using <code class="command">makeindex</code>.
</p>
</dd>
<dt><a id="index-index_002epath-_003cdirectory_003e"></a><span><code class="command">index.path &lt;directory&gt;</code><a class="copiable-link" href="#index-index_002epath-_003cdirectory_003e"> &para;</a></span></dt>
<dd><p>Adds the specified directory to the search path for index style files
(<samp class="file">.ist</samp> files).
</p>
</dd>
<dt><a id="index-index_002estyle-_003cstyle_003e"></a><span><code class="command">index.style &lt;style&gt;</code><a class="copiable-link" href="#index-index_002estyle-_003cstyle_003e"> &para;</a></span></dt>
<dd><p>Specifies the index style to be used.
</p></dd>
</dl>

<p>Each of these directives may be used with an optional first arument of the
form &lsquo;<samp class="samp">(foo,bar,quux)</samp>&rsquo; in order to specify that the directive only applies
to the indexes named &lsquo;<samp class="samp">foo</samp>&rsquo;, &lsquo;<samp class="samp">bar</samp>&rsquo; and &lsquo;<samp class="samp">quux</samp>&rsquo;. By default,
directives are applied to all indices.
</p>
<p>When using the package <code class="command">makeidx</code> instead of  <code class="command">index</code>, the
directives must of course be prefixed by &lsquo;<samp class="samp">makeidx.</samp>&rsquo; instead of
&lsquo;<samp class="samp">index.</samp>&rsquo;, and the optional first argument is not accepted.
</p>
<hr>
</div>
</div>
<div class="section-level-extent" id="Post_002dprocessing">
<div class="nav-panel">
<p>
Next: <a href="#Dvips-and-Dvipdfm" accesskey="n" rel="next">Dvips and Dvipdfm</a>, Previous: <a href="#Indexing" accesskey="p" rel="prev">Index generation</a>, Up: <a href="#Modules" accesskey="u" rel="up">Modules</a> &nbsp; </p>
</div>
<h3 class="section" id="Post_002dprocessors"><span>4.2 Post-processors<a class="copiable-link" href="#Post_002dprocessors"> &para;</a></span></h3>

<p>The following modules are provided to support different kinds of
post-processings. Note that the order matters when using these modules: if you
want to use a processing chain like
</p>
<div class="example">
<pre class="example-preformatted">foo.tex -&gt; foo.dvi -&gt; foo.ps -&gt; foo.pdf -&gt; foo.pdf.gz
</pre></div>

<p>you have to load the modules <code class="command">dvips</code>, <code class="command">ps2pdf</code> and
<code class="command">gz</code> in that order, for instance using the command line
</p>
<div class="example">
<pre class="example-preformatted">rubber -p -o ps2pdf -z foo.tex
</pre></div>

<dl class="vtable">
<dt><a id="index-bzip2"></a><span><code class="command">bzip2</code><a class="copiable-link" href="#index-bzip2"> &para;</a></span></dt>
<dd><p>Produce a version of the final document compressed with <code class="command">bzip2</code>.
</p>
</dd>
<dt><a id="index-dvipdfm"></a><span><code class="command">dvipdfm</code><a class="copiable-link" href="#index-dvipdfm"> &para;</a></span></dt>
<dd><p>Runs <code class="command">dvipdfm</code> at the end of compilation to produce a PDF document.
</p>
</dd>
<dt><a id="index-dvips"></a><span><code class="command">dvips</code><a class="copiable-link" href="#index-dvips"> &para;</a></span></dt>
<dd><p>Runs <code class="command">dvips</code> at the end of compilation to produce a PostScript
document. This module is also loaded by the command line option <samp class="option">--ps</samp>.
</p>
</dd>
<dt><a id="index-expand"></a><span><code class="command">expand</code><a class="copiable-link" href="#index-expand"> &para;</a></span></dt>
<dd><p>Produce an expanded LaTeX source by replacing <code class="code">\input</code> macros by included
files, bibliography macros by the bibliography produced by <code class="command">bibtex</code>,
and local classes and packages by their source. For details, see <a class="ref" href="#Expand">Source file expansion</a>.
</p>
</dd>
<dt><a id="index-gz"></a><span><code class="command">gz</code><a class="copiable-link" href="#index-gz"> &para;</a></span></dt>
<dd><p>Produce a version of the final document compressed with <code class="command">gzip</code>.
</p>
</dd>
<dt><a id="index-ps2pdf"></a><span><code class="command">ps2pdf</code><a class="copiable-link" href="#index-ps2pdf"> &para;</a></span></dt>
<dd><p>Assuming that the compilation produces a PostScript document (for instance
using module <code class="command">dvips</code>), convert this document to PDF using
<code class="command">ps2pdf</code>.
</p></dd>
</dl>


<ul class="mini-toc">
<li><a href="#Dvips-and-Dvipdfm" accesskey="1">Dvips and Dvipdfm</a></li>
<li><a href="#Expand" accesskey="2">Source file expansion</a></li>
</ul>
<hr>
<div class="subsection-level-extent" id="Dvips-and-Dvipdfm">
<div class="nav-panel">
<p>
Next: <a href="#Expand" accesskey="n" rel="next">Source file expansion</a>, Previous: <a href="#Post_002dprocessing" accesskey="p" rel="prev">Post-processors</a>, Up: <a href="#Post_002dprocessing" accesskey="u" rel="up">Post-processors</a> &nbsp; </p>
</div>
<h4 class="subsection" id="Dvips-and-Dvipdfm-1"><span>4.2.1 Dvips and Dvipdfm<a class="copiable-link" href="#Dvips-and-Dvipdfm-1"> &para;</a></span></h4>

<p>The <code class="command">dvips</code> and <code class="command">dvipdfm</code> modules can be used to call the
associated DVI drivers to produce PostScript or PDF documents from the DVI
output of LaTeX. The following directives may be used to change their
behaviour:
</p>
<dl class="ftable">
<dt><a id="index-dvipdfm_002eoptions-_003coptions_003e"></a><span><code class="command">dvipdfm.options &lt;options&gt;</code><a class="copiable-link" href="#index-dvipdfm_002eoptions-_003coptions_003e"> &para;</a></span></dt>
<dt><a id="index-dvips_002eoptions-_003coptions_003e"></a><span><code class="command">dvips.options &lt;options&gt;</code><a class="copiable-link" href="#index-dvips_002eoptions-_003coptions_003e"> &para;</a></span></dt>
<dd><p>Pass the specified options to the driver. The argument is a space-separated
list of options that are passed before the DVI file&rsquo;s name.
</p></dd>
</dl>

<hr>
</div>
<div class="subsection-level-extent" id="Expand">
<div class="nav-panel">
<p>
Next: <a href="#Compiler-choice" accesskey="n" rel="next">Changing compilers</a>, Previous: <a href="#Dvips-and-Dvipdfm" accesskey="p" rel="prev">Dvips and Dvipdfm</a>, Up: <a href="#Post_002dprocessing" accesskey="u" rel="up">Post-processors</a> &nbsp; </p>
</div>
<h4 class="subsection" id="Source-file-expansion"><span>4.2.2 Source file expansion<a class="copiable-link" href="#Source-file-expansion"> &para;</a></span></h4>

<p>The module <code class="command">expand</code> produces a LaTeX source from the original one by
expanding included files and packages. If the main file is <samp class="file">foo.tex</samp>
then then expanded file will be named <samp class="file">foo-final.tex</samp>. This file will be
self-contained, in particular it will not need BibTeXing nor user-defined
packages, as may be required when preparing the final version of a document
for publication.
</p>
<p>As additional effect, this module removes all comments from the source file
(including those that may contain Rubber directives). It also removes any text
that may be present after <code class="code">\end{document}</code>.
</p>
<p>Please note that this module is rather experimental.
</p>
<p>The following options control how the expansion is done:
</p>
<dl class="table">
<dt><samp class="option">class</samp></dt>
<dd><p>If the document class is user-defined (i.e. if it is in a local directory
instead of a system directory), the <code class="code">\documentclass</code> call will be
replaced by the code of the <samp class="file">.cls</samp> file. Note that this is dangerous in
general.
</p>
</dd>
<dt><samp class="option">nobib</samp></dt>
<dd><p>Do not expand the bibliography. When this option is <em class="emph">not</em> present, any
call to <code class="command">\bibiography</code> is discarded and the call to
<code class="command">\bibliographystyle</code> is replaced by the document&rsquo;s <samp class="file">.bbl</samp> file.
</p>
</dd>
<dt><samp class="option">nopkg</samp></dt>
<dd><p>Do not expand user-defined packages. When this option is <em class="emph">not</em> present,
local packages (i.e. those that are in the current directory) are replaced by
their contents.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="section-level-extent" id="Compiler-choice">
<div class="nav-panel">
<p>
Next: <a href="#Graphics" accesskey="n" rel="next">Graphics conversion</a>, Previous: <a href="#Expand" accesskey="p" rel="prev">Source file expansion</a>, Up: <a href="#Modules" accesskey="u" rel="up">Modules</a> &nbsp; </p>
</div>
<h3 class="section" id="Changing-compilers"><span>4.3 Changing compilers<a class="copiable-link" href="#Changing-compilers"> &para;</a></span></h3>

<p>The following modules are used to change the LaTeX compiler:
</p>
<dl class="vtable">
<dt><a id="index-aleph"></a><span><code class="command">aleph</code><a class="copiable-link" href="#index-aleph"> &para;</a></span></dt>
<dd><p>Use the Aleph compiler instead of TeX, i.e. compile with <code class="command">lamed</code>
instead of <code class="command">latex</code>.
</p>
</dd>
<dt><a id="index-omega"></a><span><code class="command">omega</code><a class="copiable-link" href="#index-omega"> &para;</a></span></dt>
<dd><p>Use the Omega compiler instead of TeX, i.e. compiles the document using
<code class="command">lambda</code> instead of <code class="command">latex</code>. If the module <code class="command">dvips</code> is
used too, it will use <code class="command">odvips</code> to translate the DVI file. Note that
this module is triggered automatically when the document uses the package
<code class="command">omega</code>.
</p>
</dd>
<dt><a id="index-pdftex"></a><span><code class="command">pdftex</code><a class="copiable-link" href="#index-pdftex"> &para;</a></span></dt>
<dd><p>Instructs Rubber to use <code class="command">pdflatex</code> instead of <code class="command">latex</code> to
compile the document. By default, this produces a PDF file instead of a DVI,
but when loading the module with the option <samp class="option">dvi</samp> (for instance by
saying <samp class="option">-m pdftex:dvi</samp>) the document is compiled into DVI using
<code class="command">pdflatex</code>.  This module is also loaded by the command line option
<samp class="option">--pdf</samp>.
</p>
</dd>
<dt><a id="index-vtex"></a><span><code class="command">vtex</code><a class="copiable-link" href="#index-vtex"> &para;</a></span></dt>
<dd><p>Instructs Rubber to use the VTeX compiler. By default this uses
<code class="command">vlatex</code> as the compiler to produce PDF output. With the option
<samp class="option">ps</samp> (e.g. when saying <code class="command">rubber -m vtex:ps foo.tex</code>) the
compiler used is <code class="command">vlatexp</code> and the result is a PostScript file.
</p></dd>
</dl>



<hr>
</div>
</div>
<div class="chapter-level-extent" id="Graphics">
<div class="nav-panel">
<p>
Next: <a href="#Conversion-algorithm" accesskey="n" rel="next">Conversion algorithm</a>, Previous: <a href="#Compiler-choice" accesskey="p" rel="prev">Changing compilers</a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Graphics-conversion"><span>5 Graphics conversion<a class="copiable-link" href="#Graphics-conversion"> &para;</a></span></h2>

<p>Rubber includes a system for automatic conversion of graphics (and other
files) between various file formats. This is used when graphics are included
using commands from the packages <code class="command">graphicx</code>, <code class="command">graphics</code> or
<code class="command">epsfig</code>.
</p>
<p>When a graphics inclusion macro like <code class="command">\includegraphics</code> (even with the
parameters allowed by the <code class="command">graphicx</code> package) or <code class="command">\epsfig</code> is
found in a LaTeX source, Rubber looks for the corresponding file or a way to
generate it. If the call to the macro does not specify a file extension, then
the list of possible suffixes is tried (according to the current compiler and
the options passed to the graphics package). For each possible file name,
Rubber tries to find a good way to convert this file from a source, and looks
for the file itself. The precise method is described in
<a class="ref" href="#Conversion-algorithm">Conversion algorithm</a>.
</p>

<ul class="mini-toc">
<li><a href="#Conversion-algorithm" accesskey="1">Conversion algorithm</a></li>
<li><a href="#Standard-rules" accesskey="2">Standard conversion rules</a></li>
<li><a href="#rules_002eini" accesskey="3">Syntax of <code class="command">rules.ini</code></a></li>
</ul>
<hr>
<div class="section-level-extent" id="Conversion-algorithm">
<div class="nav-panel">
<p>
Next: <a href="#Standard-rules" accesskey="n" rel="next">Standard conversion rules</a>, Previous: <a href="#Graphics" accesskey="p" rel="prev">Graphics conversion</a>, Up: <a href="#Graphics" accesskey="u" rel="up">Graphics conversion</a> &nbsp; </p>
</div>
<h3 class="section" id="Conversion-algorithm-1"><span>5.1 Conversion algorithm<a class="copiable-link" href="#Conversion-algorithm-1"> &para;</a></span></h3>

<p>Files are converted using conversion rules, as described in
<a class="ref" href="#Standard-rules">Standard conversion rules</a>, and each rule can take a number of formats as input and
produce a number of formats as output.
</p>
<p>Assume you are using <code class="command">pdflatex</code> to compile a document that contains a
macro call <code class="command">\includegraphics{foo}</code>. Since <code class="command">pdftex</code> only
accepts figures in <samp class="file">png</samp>, <samp class="file">pdf</samp> and <samp class="file">jpg</samp> format, one
of <samp class="file">foo.png</samp>, <samp class="file">foo.pdf</samp> and <samp class="file">foo.jpg</samp> must be available. If the
only available file around happens to be <samp class="file">foo.gif</samp>, it has to be
translated into one of these formats. There are tools to convert <samp class="file">gif</samp>
files into just about any other format, so we have to choose the proper
conversion to perform.
</p>
<p>Hence all rules have a <em class="emph">cost</em>, an integer that represents how unlikely a
given conversion is. For instance the rule form <code class="command">.fig</code> to
<code class="command">.eps</code> files (for XFig support) has cost zero because it is almost
certain that this is the expected rule when the <code class="command">.fig</code> file exists. On
the other hand, the rule from <code class="command">.eps</code> to <code class="command">.jpeg</code> has cost 11
because this conversion is possible though usually not wanted.
</p>
<p>Now assume that a directory contains a LaTeX source that contains
<code class="command">\includegraphics{foo}</code> and that both <samp class="file">foo.eps</samp> and
<samp class="file">foo.pdf</samp> are present, because we want to compile the document both to
PostScript and to PDF format. How can Rubber decide which figure is the source
file and which is converted from the other? By default, in this situation, no
conversion will ever be performed, since there is no way to decide. Generally,
a file will never be overwritten if the source could have been produced by
some conversion rule. This behaviour can be overridden using the
<code class="command">make</code> directive, see <a class="ref" href="#General-directives">General directives</a>.
</p>
<p>To sum up, for each requested file, the detection algorithm works as follows.
If relevant, take all possible suffixes (i.e. all accepted file formats, if no
format is specified in the source), and take all possible directories where
the file will be searched for by LaTeX. In each case, you get a file name
<samp class="file">foo</samp>. If there is an applicable rule with cost at most 0 to produce
<samp class="file">foo</samp>, use that rule. Otherwise, if the file <samp class="file">foo</samp> exists, use it
without conversion. Otherwise use the applicable rule with the least cost. If
all fails, proceed to the next file name.
</p>
<p>The list of standard rules is defined in the file <code class="command">rules.ini</code> in the
data directory. The syntax of this file is described in <a class="ref" href="#rules_002eini">Syntax of <code class="command">rules.ini</code></a>, the
standard rules are described in <a class="ref" href="#Standard-rules">Standard conversion rules</a>. Additional rules can be
defined in a file with the same format and declared using the directive
<code class="command">rules</code>.
</p>
<p>The path searched for graphics files is the same as that for LaTeX inputs by
default. If the macro <code class="command">\graphicspath</code> is used, the specified paths are
also searched, the same way as LaTeX does. Limited support is also provided
for the <code class="command">\DeclareGraphicsExtensions</code> and
<code class="command">\DeclareGraphicsRule</code> macros.
</p>
<hr>
</div>
<div class="section-level-extent" id="Standard-rules">
<div class="nav-panel">
<p>
Next: <a href="#rules_002eini" accesskey="n" rel="next">Syntax of <code class="command">rules.ini</code></a>, Previous: <a href="#Conversion-algorithm" accesskey="p" rel="prev">Conversion algorithm</a>, Up: <a href="#Graphics" accesskey="u" rel="up">Graphics conversion</a> &nbsp; </p>
</div>
<h3 class="section" id="Standard-conversion-rules"><span>5.2 Standard conversion rules<a class="copiable-link" href="#Standard-conversion-rules"> &para;</a></span></h3>

<p>The following built-in rules are available:
</p>
<dl class="table">
<dt><code class="command">eps_gz</code></dt>
<dd><p>This rule is used to extract a bounding box from a gzipped EPS file, in order
to be able to compile a document while keeping large figure files compressed.
</p>
</dd>
<dt><code class="command">fig2dev</code></dt>
<dd><p>This is the exporting program that goes with XFig. It is used to convert files
in <samp class="file">.fig</samp> format into EPS, PDF or PNG. Rubber also supports the use of
combined EPS/LaTeX of PDF/LaTeX, it is detected when an <code class="command">\input</code> macro
refers to a filename that ends in <samp class="file">.eps_t</samp> or <samp class="file">.pstex_t</samp>. When the
suffix is <samp class="file">.eps_t</samp> or <samp class="file">.pdf_t</samp>, the same document will compile both
in PostScript and PDF.
</p>
</dd>
<dt><code class="command">mpost</code></dt>
<dd><p>MetaPost has extra support in Rubber. If a graphics is included with a
filename that ends with a dot and a decimal number like <samp class="file">foo.42</samp>, then
it is considered to be generated from <samp class="file">foo.mp</samp> if it exists. Dependency
analysis is performed between MetaPost sources, so that recompilation always
occurs when needed. If the compilation of a MetaPost source fails, the errors
are reported as it would be done for LaTeX errors.
</p>
</dd>
<dt><code class="command">shell</code></dt>
<dd><p>Other programs can be used using the <code class="command">shell</code> rule. This rule takes an
extra parameter <code class="code">command</code>, specified in the rule file, that defines a
shell command-line. This is used for simple conversion rules using
command-line tools like <code class="command">convert</code> (from ImageMagick),
<code class="command">epstopdf</code>.
</p></dd>
</dl>

<hr>
</div>
<div class="section-level-extent" id="rules_002eini">
<div class="nav-panel">
<p>
Next: <a href="#Encoding" accesskey="n" rel="next">Encoding issues</a>, Previous: <a href="#Standard-rules" accesskey="p" rel="prev">Standard conversion rules</a>, Up: <a href="#Graphics" accesskey="u" rel="up">Graphics conversion</a> &nbsp; </p>
</div>
<h3 class="section" id="Syntax-of-rules_002eini"><span>5.3 Syntax of <code class="command">rules.ini</code><a class="copiable-link" href="#Syntax-of-rules_002eini"> &para;</a></span></h3>

<p>The rules file has a format in the style of Wind*ws INI files. The lines that
start with a semicolon <code class="code">;</code> are comments, empty lines are ignored. The
file is decomposed in sections, each introduced by a line of the form
</p>
<div class="example">
<pre class="example-preformatted">[rule-name]
</pre></div>

<p>where <code class="code">rule-name</code> is a unique identifier for the rule. Following this
header are lines of the form
</p>
<div class="example">
<pre class="example-preformatted">key = value
</pre></div>

<p>where <code class="code">key</code> is an attribute name and <code class="code">value</code> is its value, without
any quotes. The spaces around the value are stripped.
</p>
<p>The following attributes are used:
</p>
<dl class="table">
<dt><code class="code">target</code></dt>
<dd><p>A regular expression that matches the target file name.
</p></dd>
<dt><code class="code">source</code></dt>
<dd><p>A template that describes the source file name, with references to groups
marked in the target expression as <code class="code">\1</code>, <code class="code">\2</code> etc. This template may
also contain choices of the form <code class="code">{foo,bar,quux}</code> to denote several
possibilities for the source name.
</p></dd>
<dt><code class="code">rule</code></dt>
<dd><p>The name of the conversion rule. This name currently refers to internal
modules of Rubber, as described in <a class="ref" href="#Standard-rules">Standard conversion rules</a>.
</p></dd>
<dt><code class="code">cost</code></dt>
<dd><p>The cost of the rule, as an integer. In the default file, this ranges between
0 and 12.
</p></dd>
</dl>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Encoding">
<div class="nav-panel">
<p>
Next: <a href="#Index" accesskey="n" rel="next">Index</a>, Previous: <a href="#rules_002eini" accesskey="p" rel="prev">Syntax of <code class="command">rules.ini</code></a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Encoding-issues"><span>6 Encoding issues<a class="copiable-link" href="#Encoding-issues"> &para;</a></span></h2>


<ul class="mini-toc">
<li><a href="#Design-choices-about-encoding" accesskey="1">Design choices about input and output encoding.</a></li>
<li><a href="#Conversion-to-UTF_002d8" accesskey="2">Conversion of legacy sources to UTF-8</a></li>
<li><a href="#Non-UTF_002d8-sources" accesskey="3">Handling of unconverted legacy sources</a></li>
</ul>
<hr>
<div class="section-level-extent" id="Design-choices-about-encoding">
<div class="nav-panel">
<p>
Next: <a href="#Conversion-to-UTF_002d8" accesskey="n" rel="next">Conversion of legacy sources to UTF-8</a>, Previous: <a href="#Encoding" accesskey="p" rel="prev">Encoding issues</a>, Up: <a href="#Encoding" accesskey="u" rel="up">Encoding issues</a> &nbsp; </p>
</div>
<h3 class="section" id="Design-choices-about-input-and-output-encoding_002e"><span>6.1 Design choices about input and output encoding.<a class="copiable-link" href="#Design-choices-about-input-and-output-encoding_002e"> &para;</a></span></h3>

<p>Since version 1.5, rubber decodes <samp class="file">.tex</samp> sources and log files
with the UTF-8 encoding.
Legacy 8-bits encodings are quite common,
but can easily be converted,
and should become rare now that the LaTeX community recommends UTF-8
for new documents.
</p>
<p>For data exchanged with the underlying operating system,
like arguments received from the command line,
paths passed to subprocesses
or messages displayed on the console,
it makes sense that rubber uses the system default encoding:
generally UTF-8,
a code page depending on local settings on Windows.
</p>
<p>In the rare cases where it converts auxiliary files by itself, rubber
simply avoids to decode, and only deals with bytes between 0 and 127.
</p>
<hr>
</div>
<div class="section-level-extent" id="Conversion-to-UTF_002d8">
<div class="nav-panel">
<p>
Next: <a href="#Non-UTF_002d8-sources" accesskey="n" rel="next">Handling of unconverted legacy sources</a>, Previous: <a href="#Design-choices-about-encoding" accesskey="p" rel="prev">Design choices about input and output encoding.</a>, Up: <a href="#Encoding" accesskey="u" rel="up">Encoding issues</a> &nbsp; </p>
</div>
<h3 class="section" id="Conversion-of-legacy-sources-to-UTF_002d8"><span>6.2 Conversion of legacy sources to UTF-8<a class="copiable-link" href="#Conversion-of-legacy-sources-to-UTF_002d8"> &para;</a></span></h3>

<p>Most text editors allow you to explicitly select this encoding for
newly created files.
</p>
<p>An existing source with any other encoding can be converted, either by
selecting the appropriate option when saving from your favorite
editor, or with a dedicated tool.
For example, the following commands translate <samp class="file">doc.tex</samp> from the
<samp class="option">latin1</samp> encoding.
</p><div class="example">
<pre class="example-preformatted">cp doc.tex doc.tex.bak
iconv doc.tex.bak -f latin1 -o doc.tex -t utf-8
</pre></div>
<p>You should then update the <code class="code">inputenc</code> line,
check that the compilation goes well,
and finally remove the <samp class="file">doc.tex.bak</samp> backup.
</p>
<p>Legacy US-ASCII sources, only containing bytes betwen 0 and 127 and
relying on TeX constructs like <code class="code">\'e</code> to encode local characters,
are valid UTF-8 sources, and will be decoded correctly.  No conversion
is needed.
</p>
<p>More generally, conversion from usual (8-bits, US-ASCII-compatible)
encodings will only replace bytes from 128 to 255 with new UTF-8 byte
sequences, but US-ASCII bytes will remain unchanged.
</p>
<hr>
</div>
<div class="section-level-extent" id="Non-UTF_002d8-sources">
<div class="nav-panel">
<p>
Next: <a href="#Encoding" accesskey="n" rel="next">Encoding issues</a>, Previous: <a href="#Conversion-to-UTF_002d8" accesskey="p" rel="prev">Conversion of legacy sources to UTF-8</a>, Up: <a href="#Encoding" accesskey="u" rel="up">Encoding issues</a> &nbsp; </p>
</div>
<h3 class="section" id="Handling-of-unconverted-legacy-sources"><span>6.3 Handling of unconverted legacy sources<a class="copiable-link" href="#Handling-of-unconverted-legacy-sources"> &para;</a></span></h3>

<p>For various reasons, some sources cannot be converted.
Rubber attempts to deal with them,
but the result will never be perfect.
</p>
<p>Accurate detection of the source encoding is not as easy as it seems.
An <code class="code">inputenc</code> command anywhere in an included <samp class="file">.tex</samp> source
can affect remaining bytes in all including files.
Its arguments can be generated,
or depend on the result of a test.
In other words, rubber would need a full TeX interpreter,
including features that the author now consider as bugs,
like tolerating encoding errors inside comments.
</p>
<p>Instead, rubber translates
bytes from 0 to 127 to the right ASCII character,
most bytes from 128 to 255 to the Unicode replacement character
 (often displayed as an empty square),
and rare sequences of such bytes as random non-ASCII characters.
</p>
<p>All encodings encountered in the TeX world share the
property that a byte between 0 and 127 anywhere in the file always
represents a single US-ASCII character, and that such characters
cannot be represented by another byte sequence.
Since rubber searches for TeX commands expressed with such characters,
it will most of the time be able to work even if it ignores all other bytes.
</p>
<p>Non-ASCII characters will look ugly in log messages displayed on the
screen, and this is acceptable.
</p>
<p>Real problems may occur when commands intended for cooperation with
the underlying operating system,
like <code class="code">\includegraphics</code> or <code class="code">\input</code>,
receive arguments, like paths, containing non-ASCII characters.
</p>
<p>These characters will be decoded incorrectly, resulting in various
problems later (no file found with the given path, for example).
This problem is not specific to rubber,
and such path arguments should always be formed of ASCII characters,
ideally roman letters, decimal digits and a dot for the extension.
</p>

<hr>
</div>
</div>
<div class="chapter-level-extent" id="Index">
<div class="nav-panel">
<p>
Next: <a href="#Directive-index" accesskey="n" rel="next">Directive index</a>, Previous: <a href="#Encoding" accesskey="p" rel="prev">Encoding issues</a>, Up: <a href="#Top" accesskey="u" rel="up">Rubber</a> &nbsp; </p>
</div>
<h2 class="chapter" id="Index-1"><span>7 Index<a class="copiable-link" href="#Index-1"> &para;</a></span></h2>


<hr>
<a class="node-id" id="Directive-index"></a><div class="nav-panel">
<p>
Next: <a href="#Module-index" accesskey="n" rel="next">Module index</a>, Previous: <a href="#Index" accesskey="p" rel="prev">Index</a>, Up: <a href="#Index" accesskey="u" rel="up">Index</a> &nbsp; </p>
</div>
<h4 class="node"><span>Directive index<a class="copiable-link" href="#Directive-index"> &para;</a></span></h4>

<hr>
<a class="node-id" id="Module-index"></a><div class="nav-panel">
<p>
Previous: <a href="#Directive-index" accesskey="p" rel="prev">Directive index</a>, Up: <a href="#Index" accesskey="u" rel="up">Index</a> &nbsp; </p>
</div>
<h4 class="node"><span>Module index<a class="copiable-link" href="#Module-index"> &para;</a></span></h4>

</div>
</div>



</body>
</html>
