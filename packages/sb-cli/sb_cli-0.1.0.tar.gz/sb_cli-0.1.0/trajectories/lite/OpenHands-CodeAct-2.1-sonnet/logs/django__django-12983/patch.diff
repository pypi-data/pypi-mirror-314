diff --git a/django/utils/text.py b/django/utils/text.py
index fb5f6298c4..ab4b950899 100644
--- a/django/utils/text.py
+++ b/django/utils/text.py
@@ -403,7 +403,10 @@ def slugify(value, allow_unicode=False):
     else:
         value = unicodedata.normalize('NFKD', value).encode('ascii', 'ignore').decode('ascii')
     value = re.sub(r'[^\w\s-]', '', value.lower()).strip()
-    return re.sub(r'[-\s]+', '-', value)
+    # Convert underscores and spaces to hyphens
+    value = re.sub(r'[-_\s]+', '-', value)
+    # Remove leading and trailing hyphens
+    return value.strip('-')
 
 
 def camel_case_to_spaces(value):
diff --git a/test_slugify.py b/test_slugify.py
new file mode 100644
index 0000000000..39f842dc53
--- /dev/null
+++ b/test_slugify.py
@@ -0,0 +1,15 @@
+from django.utils import text
+
+test_cases = [
+    "___This is a test ---",  # Original test case
+    "___test___",  # Edge case with only underscores
+    "---test---",  # Edge case with only dashes
+    "_-_test_-_",  # Edge case with mixed dashes and underscores
+    "   test   ",  # Edge case with spaces
+    "___---   test   ---___",  # Complex edge case
+]
+
+for test in test_cases:
+    result = text.slugify(test)
+    print(f"Input:  {test!r}")
+    print(f"Output: {result!r}\n")
\ No newline at end of file
