diff --git a/django/db/models/sql/query.py b/django/db/models/sql/query.py
index aaf35ee37c..78918408fa 100644
--- a/django/db/models/sql/query.py
+++ b/django/db/models/sql/query.py
@@ -761,7 +761,22 @@ class Query(BaseExpression):
 
         # Create a new alias for this table.
         if alias_list:
-            alias = '%s%d' % (self.alias_prefix, len(self.alias_map) + 1)
+            # Find the next available alias number
+            # Start with the highest existing alias number + 1
+            max_alias_num = 0
+            for existing_alias in self.alias_map:
+                if existing_alias.startswith(self.alias_prefix):
+                    try:
+                        num = int(existing_alias[len(self.alias_prefix):])
+                        max_alias_num = max(max_alias_num, num)
+                    except ValueError:
+                        pass
+            counter = max_alias_num + 1
+            while True:
+                alias = '%s%d' % (self.alias_prefix, counter)
+                if alias not in self.alias_map:
+                    break
+                counter += 1
             alias_list.append(alias)
         else:
             # The first occurrence of a table uses the table name directly.
@@ -846,6 +861,11 @@ class Query(BaseExpression):
         relabelling any references to them in select columns and the where
         clause.
         """
+        # The change_map keys and values must be disjoint to prevent the same
+        # alias from being changed twice. For example, if we have:
+        #   change_map = {'T4': 'T5', 'T5': 'T6'}
+        # Then 'T5' would be changed twice: first to 'T6' and then that 'T6'
+        # would be changed to something else, leading to incorrect results.
         assert set(change_map).isdisjoint(change_map.values())
 
         # 1. Update references in "select" (normal columns plus aliases),
