diff --git a/db.sqlite3 b/db.sqlite3
new file mode 100644
index 0000000000..dbd2e54dfe
Binary files /dev/null and b/db.sqlite3 differ
diff --git a/django/db/migrations/serializer.py b/django/db/migrations/serializer.py
index d88cda6e20..388217ec54 100644
--- a/django/db/migrations/serializer.py
+++ b/django/db/migrations/serializer.py
@@ -168,7 +168,9 @@ class FunctionTypeSerializer(BaseSerializer):
         ):
             klass = self.value.__self__
             module = klass.__module__
-            return "%s.%s.%s" % (module, klass.__name__, self.value.__name__), {
+            # Get the full class path including any parent classes
+            class_path = getattr(klass, "__qualname__", klass.__name__)
+            return "%s.%s.%s" % (module, class_path, self.value.__name__), {
                 "import %s" % module
             }
         # Further error checking
diff --git a/testapp/__init__.py b/testapp/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/testapp/migrations/0001_initial.py b/testapp/migrations/0001_initial.py
new file mode 100644
index 0000000000..648dd160ea
--- /dev/null
+++ b/testapp/migrations/0001_initial.py
@@ -0,0 +1,36 @@
+# Generated by Django 5.0.dev20230717182637 on 2024-10-28 22:40
+
+import testapp.models
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = []
+
+    operations = [
+        migrations.CreateModel(
+            name="Profile",
+            fields=[
+                (
+                    "id",
+                    models.AutoField(
+                        auto_created=True,
+                        primary_key=True,
+                        serialize=False,
+                        verbose_name="ID",
+                    ),
+                ),
+                (
+                    "capability",
+                    models.CharField(
+                        choices=[("BASIC", "Basic"), ("PROFESSIONAL", "Professional")],
+                        default=testapp.models.Profile.Capability.default,
+                        max_length=30,
+                    ),
+                ),
+            ],
+        ),
+    ]
diff --git a/testapp/migrations/__init__.py b/testapp/migrations/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/testapp/models.py b/testapp/models.py
new file mode 100644
index 0000000000..9983f6117a
--- /dev/null
+++ b/testapp/models.py
@@ -0,0 +1,16 @@
+from django.db import models
+
+class Profile(models.Model):
+    class Capability(models.TextChoices):
+        BASIC = ("BASIC", "Basic")
+        PROFESSIONAL = ("PROFESSIONAL", "Professional")
+        
+        @classmethod
+        def default(cls) -> str:
+            return cls.BASIC
+            
+    capability = models.CharField(
+        max_length=30,
+        choices=Capability.choices,
+        default=Capability.default
+    )
