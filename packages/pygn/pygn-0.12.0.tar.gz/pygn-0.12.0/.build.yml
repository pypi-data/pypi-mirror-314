image: fedora/latest
packages:
  - python3
  - python3-build
  - python3-rply
sources:
  - https://git.sr.ht/~mcepl/pygn
tasks:
  - build: |
     cd pygn
     python3 -mbuild
     find . -name \*.whl -o -name \*.tar.gz
  - test: |
     cd pygn
     PYTHONPATH=$(readlink -f dist/pygn-*.whl|tail -n1) python3 -munittest discover -v test
artifacts:
  # https://is.gd/Z5VJlI
  # - pygn/dist/pygn-*.tar.gz
  # - pygn/dist/pygn-*.whl
