function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-5u5REPT4.js","./serialization-DJC7NP0N.js","./Arrow.dom-GBJpMYQS.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as O,r as y,o as l,e as u,F as G,q as me,t as N,x as Ae,P as ne,_ as Z,D as $,b as J,$ as Ze,f as I,c as f,a0 as Le,a1 as $e,k as _e,O as xe,L as W,s as oe,y as Be,z as Ee,J as X,a2 as ae,a3 as Je,I as M,X as Ue,i as fe,a as ve,w as ee,m as Ce,a4 as Ye,n as Ie,a5 as Qe,l as He,v as Pe,W as qe,a6 as D,a7 as te,a8 as ze,a9 as Ke,aa as et,ab as tt,ac as at}from"./index-YmO2-Soz.js";const nt=["tabindex"],ot=["value"],At=O({__name:"CoreDataframeCellNumber",props:{value:{validator:e=>typeof e=="number"||typeof e=="bigint",required:!0},editable:{type:Boolean,required:!1}},emits:{change:e=>typeof e=="string"},setup(e,{emit:n}){const o=e,r=n,v=y(),A=y(),a=y(!1);async function p(){if(!o.editable)return!1;a.value=!0,await ne(),A.value.focus()}function k(){a.value=!1,Number(A.value.value)!==o.value&&r("change",A.value.value)}return(h,_)=>(l(),u("div",{ref_key:"wrapper",ref:v,class:Ae(["CoreDataframeCellNumber",{"CoreDataframeCellNumber--editable":e.editable}]),tabindex:e.editable&&!a.value?0:-1,onFocusin:p,onClick:p},[a.value?(l(),u("input",{key:0,ref_key:"input",ref:A,type:"number",value:e.value,onFocusout:k},null,40,ot)):(l(),u(G,{key:1},[me(N(e.value),1)],64))],42,nt))}}),st=Z(At,[["__scopeId","data-v-ce69dacd"]]),rt=["tabindex"],lt=["value"],it=O({__name:"CoreDataframeCellText",props:{value:{validator:()=>!0,required:!0},useMarkdown:{type:Boolean,required:!1},editable:{type:Boolean,required:!1}},emits:{change:e=>typeof e=="string"},setup(e,{emit:n}){const o=e,r=n,v=y(),A=y(),a=y(!1),p=y();async function k(){var _;if(!o.editable)return!1;p.value=((_=v.value)==null?void 0:_.getBoundingClientRect().height)-16-1,a.value=!0,await ne(),A.value.focus()}function h(){a.value=!1,A.value.value!==o.value&&r("change",A.value.value)}return(_,w)=>(l(),u("div",{ref_key:"wrapper",ref:v,class:Ae(["CoreDataframeCellText",{"CoreDataframeCellText--editable":e.editable}]),tabindex:e.editable&&!a.value?0:-1,onFocusin:k,onClick:k},[a.value?(l(),u("textarea",{key:0,ref_key:"textarea",ref:A,value:String(e.value),style:$({height:p.value?`${p.value}px`:"auto"}),onFocusout:h},null,44,lt)):(l(),u(G,{key:1},[e.useMarkdown?(l(),J(Ze,{key:0,"raw-text":String(e.value)},null,8,["raw-text"])):(l(),u(G,{key:1},[me(N(e.value),1)],64))],64))],42,rt))}}),dt=Z(it,[["__scopeId","data-v-ac09b769"]]),ut=["checked","readonly","tabindex"],ct=O({__name:"CoreDataframeCellBoolean",props:{value:{type:Boolean,required:!0},editable:{type:Boolean,required:!1}},emits:{change:e=>typeof e=="boolean"},setup(e,{emit:n}){const o=e,r=n;function v(A){if(!o.editable){A.preventDefault(),A.stopPropagation();return}r("change",A.target.checked)}return(A,a)=>(l(),u("div",{class:Ae(["CoreDataframeCellBoolean",{"CoreDataframeCellBoolean--disabled":!e.editable}])},[I("input",{type:"checkbox",checked:e.value,readonly:!e.editable,tabindex:e.editable?0:-1,onChange:v},null,40,ut)],2))}}),ft=Z(ct,[["__scopeId","data-v-29cadcfd"]]),vt={class:"CoreDataframeCellUnknown"},mt=O({__name:"CoreDataframeCellUnknown",props:{value:{validator:()=>!0,required:!0}},setup(e){const n=e,o=f(()=>JSON.stringify(n.value,Le));return(r,v)=>(l(),u("div",vt,N(o.value),1))}}),pt=Z(mt,[["__scopeId","data-v-f172f71d"]]),wt=O({__name:"CoreDataframeCell",props:{value:{validator:()=>!0,required:!0},useMarkdown:{type:Boolean,required:!1},editable:{type:Boolean,required:!1}},emits:{change:e=>e!==void 0},setup(e){const n=e,o=f(()=>{switch(typeof n.value){case"number":case"bigint":return st;case"boolean":return ft;case"string":return dt;default:return pt}});return(r,v)=>(l(),J($e(o.value),{value:e.value,"use-markdown":e.useMarkdown,editable:e.editable,onChange:v[0]||(v[0]=A=>r.$emit("change",A))},null,40,["value","use-markdown","editable"]))}}),yt=e=>(Be("data-v-db6d7db9"),e=e(),Ee(),e),bt={class:"BaseDropdown"},ht=["popovertarget"],gt=yt(()=>I("i",{class:"material-symbols-outlined"},"more_horiz",-1)),Ct=[gt],It=["id"],_t=["onClickCapture"],xt=O({__name:"BaseDropdown",props:{options:{type:Object,required:!0}},emits:{selected:e=>typeof e=="string"},setup(e,{emit:n}){const o=n;function r(){return Math.random().toString()}const v=y(),A=r(),a=y(),p=()=>{var b;return(b=a.value)==null?void 0:b.hidePopover()},k=y("unset"),h=y("unset");function _(){const b=v.value.getBoundingClientRect();k.value=`${b.top+b.height+4+window.pageYOffset}px`,h.value=`${b.left+window.pageXOffset}px`}function w(b){o("selected",b),p()}return _e(()=>window.addEventListener("scroll",p)),xe(()=>window.removeEventListener("scroll",p)),(b,T)=>(l(),u("div",bt,[I("button",{ref_key:"trigger",ref:v,popovertarget:W(A),class:"BaseDropdown__trigger",onClick:_},Ct,8,ht),I("div",{id:W(A),ref_key:"popover",ref:a,class:"BaseDropdown__dropdown",popover:"",style:$({top:k.value,left:h.value})},[(l(!0),u(G,null,oe(Object.entries(e.options),([i,d])=>(l(),u("button",{key:i,class:"BaseDropdown__dropdown_item",tabindex:"1",onClickCapture:E=>w(i)},N(d),41,_t))),128))],12,It)]))}}),Bt=Z(xt,[["__scopeId","data-v-db6d7db9"]]),S="__internal_arquero_id",Et="data:application/vnd.apache.arrow.file;base64,QVJST1cxAAD/////iAMAABAAAAAAAAoADgAGAAUACAAKAAAAAAEEABAAAAAAAAoADAAAAAQACAAKAAAAlAIAAAQAAAABAAAADAAAAAgADAAEAAgACAAAAGwCAAAEAAAAXwIAAHsiaW5kZXhfY29sdW1ucyI6IFsiX19pbmRleF9sZXZlbF8wX18iXSwgImNvbHVtbl9pbmRleGVzIjogW3sibmFtZSI6IG51bGwsICJmaWVsZF9uYW1lIjogbnVsbCwgInBhbmRhc190eXBlIjogInVuaWNvZGUiLCAibnVtcHlfdHlwZSI6ICJvYmplY3QiLCAibWV0YWRhdGEiOiB7ImVuY29kaW5nIjogIlVURi04In19XSwgImNvbHVtbnMiOiBbeyJuYW1lIjogImNvbF9hIiwgImZpZWxkX25hbWUiOiAiY29sX2EiLCAicGFuZGFzX3R5cGUiOiAiaW50NjQiLCAibnVtcHlfdHlwZSI6ICJpbnQ2NCIsICJtZXRhZGF0YSI6IG51bGx9LCB7Im5hbWUiOiAiY29sX2IiLCAiZmllbGRfbmFtZSI6ICJjb2xfYiIsICJwYW5kYXNfdHlwZSI6ICJpbnQ2NCIsICJudW1weV90eXBlIjogImludDY0IiwgIm1ldGFkYXRhIjogbnVsbH0sIHsibmFtZSI6IG51bGwsICJmaWVsZF9uYW1lIjogIl9faW5kZXhfbGV2ZWxfMF9fIiwgInBhbmRhc190eXBlIjogImludDY0IiwgIm51bXB5X3R5cGUiOiAiaW50NjQiLCAibWV0YWRhdGEiOiBudWxsfV0sICJjcmVhdG9yIjogeyJsaWJyYXJ5IjogInB5YXJyb3ciLCAidmVyc2lvbiI6ICIxMi4wLjAifSwgInBhbmRhc192ZXJzaW9uIjogIjEuNS4zIn0ABgAAAHBhbmRhcwAAAwAAAIgAAABEAAAABAAAAJT///8AAAECEAAAACQAAAAEAAAAAAAAABEAAABfX2luZGV4X2xldmVsXzBfXwAAAJD///8AAAABQAAAAND///8AAAECEAAAABgAAAAEAAAAAAAAAAUAAABjb2xfYgAAAMD///8AAAABQAAAABAAFAAIAAYABwAMAAAAEAAQAAAAAAABAhAAAAAgAAAABAAAAAAAAAAFAAAAY29sX2EAAAAIAAwACAAHAAgAAAAAAAABQAAAAAAAAAD/////6AAAABQAAAAAAAAADAAWAAYABQAIAAwADAAAAAADBAAYAAAAMAAAAAAAAAAAAAoAGAAMAAQACAAKAAAAfAAAABAAAAACAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAAAAAAAwAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAD/////AAAAABAAAAAMABQABgAIAAwAEAAMAAAAAAAEADwAAAAoAAAABAAAAAEAAACYAwAAAAAAAPAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAACgAMAAAABAAIAAoAAACUAgAABAAAAAEAAAAMAAAACAAMAAQACAAIAAAAbAIAAAQAAABfAgAAeyJpbmRleF9jb2x1bW5zIjogWyJfX2luZGV4X2xldmVsXzBfXyJdLCAiY29sdW1uX2luZGV4ZXMiOiBbeyJuYW1lIjogbnVsbCwgImZpZWxkX25hbWUiOiBudWxsLCAicGFuZGFzX3R5cGUiOiAidW5pY29kZSIsICJudW1weV90eXBlIjogIm9iamVjdCIsICJtZXRhZGF0YSI6IHsiZW5jb2RpbmciOiAiVVRGLTgifX1dLCAiY29sdW1ucyI6IFt7Im5hbWUiOiAiY29sX2EiLCAiZmllbGRfbmFtZSI6ICJjb2xfYSIsICJwYW5kYXNfdHlwZSI6ICJpbnQ2NCIsICJudW1weV90eXBlIjogImludDY0IiwgIm1ldGFkYXRhIjogbnVsbH0sIHsibmFtZSI6ICJjb2xfYiIsICJmaWVsZF9uYW1lIjogImNvbF9iIiwgInBhbmRhc190eXBlIjogImludDY0IiwgIm51bXB5X3R5cGUiOiAiaW50NjQiLCAibWV0YWRhdGEiOiBudWxsfSwgeyJuYW1lIjogbnVsbCwgImZpZWxkX25hbWUiOiAiX19pbmRleF9sZXZlbF8wX18iLCAicGFuZGFzX3R5cGUiOiAiaW50NjQiLCAibnVtcHlfdHlwZSI6ICJpbnQ2NCIsICJtZXRhZGF0YSI6IG51bGx9XSwgImNyZWF0b3IiOiB7ImxpYnJhcnkiOiAicHlhcnJvdyIsICJ2ZXJzaW9uIjogIjEyLjAuMCJ9LCAicGFuZGFzX3ZlcnNpb24iOiAiMS41LjMifQAGAAAAcGFuZGFzAAADAAAAiAAAAEQAAAAEAAAAlP///wAAAQIQAAAAJAAAAAQAAAAAAAAAEQAAAF9faW5kZXhfbGV2ZWxfMF9fAAAAkP///wAAAAFAAAAA0P///wAAAQIQAAAAGAAAAAQAAAAAAAAABQAAAGNvbF9iAAAAwP///wAAAAFAAAAAEAAUAAgABgAHAAwAAAAQABAAAAAAAAECEAAAACAAAAAEAAAAAAAAAAUAAABjb2xfYQAAAAgADAAIAAcACAAAAAAAAAFAAAAAsAMAAEFSUk9XMQ==",ke=/^__index_level_[0-9]+__$/,kt={key:0,class:"CoreDataframeRow__hand"},Rt={key:1,class:"cell indexCell"},Dt=O({__name:"CoreDataframeRow",props:{showIndex:{type:Boolean,required:!1},indexText:{type:[Number,String],required:!0},columns:{type:Array,required:!0},row:{type:Object,required:!0},useMarkdown:{type:Boolean,required:!1},editable:{type:Boolean,required:!1},actions:{type:Object,required:!0}},emits:{change:(e,n,o)=>typeof e=="string"&&typeof n=="number"&&o!==void 0,action:(e,n)=>typeof n=="number"&&typeof e=="string"},setup(e){const n=e,o=y(!1),r=f(()=>Object.keys(n.actions||{}).length>0);return(v,A)=>(l(),u("div",{class:"CoreDataframeRow",tabindex:"0",onMouseover:A[1]||(A[1]=a=>o.value=!0),onMouseleave:A[2]||(A[2]=a=>o.value=!1),onFocusin:A[3]||(A[3]=a=>o.value=!0)},[r.value?(l(),u("div",kt,[o.value?(l(),J(Bt,{key:0,options:e.actions,onSelected:A[0]||(A[0]=a=>v.$emit("action",a,e.row[W(S)]))},null,8,["options"])):X("",!0)])):X("",!0),e.showIndex?(l(),u("div",Rt,N(e.indexText),1)):X("",!0),(l(!0),u(G,null,oe(e.columns,a=>(l(),J(wt,{key:`${e.row[W(S)]}_${a}`,class:"cell",value:e.row[a],"use-markdown":e.useMarkdown,editable:e.editable,onChange:p=>v.$emit("change",a,e.row[W(S)],p)},null,8,["value","use-markdown","editable","onChange"]))),128))],32))}}),St=Z(Dt,[["__scopeId","data-v-0d240511"]]);function Wt(e){const n=ae([]),o=y(!1);async function r(){if(!o.value){for(o.value=!0;n.value.length;){const[A,...a]=n.value;try{await e(A)}catch(p){console.error("Error during handling job",A,p)}finally{n.value=a}}o.value=!1}}function v(A){if(n.value=[...n.value,A],!o.value)return r()}return{push:v,isBusy:Je(o)}}function Tt(e,n,o,r){const v=n.at(-1).componentId,A=f(()=>e.getComponentById(v)),{push:a,isBusy:p}=Wt(k);async function k(i){switch(i.eventType){case"wf-dataframe-add":await h(...i.payload);break;case"wf-dataframe-update":await w(...i.payload);break;case"wf-dataframe-action":await _(...i.payload);break}}async function h(){const i="wf-dataframe-add",d=r.value.numRows(),E=await M(()=>import("./index-5u5REPT4.js"),__vite__mapDeps([0,1]),import.meta.url),x=E.escape(V=>V[S]===d),g=r.value.filter(x).object();if(!g)throw Error("Could not find record");const j=Xt(g),L=E.from([j]);if(r.value=r.value.concat(L).derive({[S]:()=>E.op.row_number()}),!!b(i))return new Promise(V=>{const U=new CustomEvent(i,{detail:{payload:{record:j,record_index:d},callback:V}});T(U)})}async function _(i,d){const E="wf-dataframe-action";if(!r.value)throw Error("Table is not ready");if(!b(E))return;const x=d-1;return new Promise(g=>{const j=new CustomEvent(E,{detail:{payload:{action:i,record_index:x},callback:g}});T(j)})}async function w(i,d,E){if(!r.value)throw Error("Table is not ready");if(d===void 0)throw Error("Must specify the index to update a row");const x="wf-dataframe-update",g=d-1,j=await M(()=>import("./index-5u5REPT4.js"),__vite__mapDeps([0,1]),import.meta.url),L=j.escape(F=>F[S]===d),V=r.value.filter(L).object();if(!V)throw Error("Could not find record");const U=V[i],se=jt(U,E),re=j.escape(F=>F[S]===d?se:F[i]);if(r.value=r.value.derive({[i]:re}),!b(x))return;const P=Ft(r.value.filter(L).object());return new Promise(F=>{const le=new CustomEvent(x,{detail:{payload:{record:P,record_index:g},callback:F}});T(le)})}function b(i){var x,g;const d=(x=A.value.handlers)==null?void 0:x[i],E=((g=A.value.binding)==null?void 0:g.eventType)==i;return!!(d||E)}function T(i){o.value instanceof HTMLElement?o.value.dispatchEvent(i):o.value.$el.dispatchEvent(i)}return{isBusy:p,handleUpdateCell:(...i)=>a({eventType:"wf-dataframe-update",payload:i}),handleAddRow:(...i)=>a({eventType:"wf-dataframe-add",payload:i}),handleActionRow:(...i)=>a({eventType:"wf-dataframe-action",payload:i})}}function jt(e,n){switch(typeof e){case"number":return Number(n);case"string":return String(n);case"boolean":return!!n;case"bigint":return BigInt(String(n));default:throw Error(`Could not update a field of type ${typeof e}`)}}function Re(e){return e===S||ke.test(e)}function Ft(e){return Object.entries(e).filter(([n])=>!Re(n)).reduce((n,[o,r])=>(n[o]=r,n),{})}function Xt(e){return Object.entries(e).filter(([n])=>!Re(n)).reduce((n,[o,r])=>(n[o]=Vt(r),n),{})}function Vt(e){switch(typeof e){case"number":return 0;case"string":return"";case"boolean":return!1;case"bigint":return BigInt(0);case"object":return{};default:throw Error(`Could not get default value a field of type ${typeof e}`)}}const H=e=>(Be("data-v-87e291ff"),e=e(),Ee(),e),Ot=["aria-busy"],Mt={key:0},Gt=H(()=>I("i",{class:"material-symbols-outlined"},"download",-1)),Nt={key:0},Zt={key:1,"data-writer-grid-col":"0",class:"cell headerCell indexCell"},Lt=H(()=>I("div",{class:"name"},null,-1)),$t=H(()=>I("div",{class:"widthAdjuster"},null,-1)),Jt=[Lt,$t],Ut=["data-writer-grid-col","onClick"],Yt={class:"name"},Qt={class:"icon"},Ht={class:"material-symbols-outlined"},Pt=H(()=>I("div",{class:"widthAdjuster"},null,-1)),qt={key:0,class:"CoreDataframe__newRow cell"},zt=H(()=>I("i",{class:"material-symbols-outlined"},"add",-1)),Kt="A component to display Pandas DataFrames.",ea=`
# Subscribe this event handler to the \`wf-dataframe-update\` event
def on_record_change(state, payload):
    state['mydf'].record_update(payload)`,ta=`
# Subscribe this event handler to the \`wf-dataframe-add\` event
def on_record_add(state, payload):
	payload['record']['sales'] = 0 # default value inside the dataframe
	state['mydf'].record_add(payload)`,aa=`
# Subscribe this event handler to the \`wf-dataframe-action\` event
def on_record_action(state, payload):
	record_index = payload['record_index']
	if payload['action'] == 'remove':
		state['mydf'].record_remove(payload)
	if payload['action'] == 'open':
		state['record'] = state['df'].record(record_index) # dict representation of record`,na={writer:{name:"DataFrame",description:Kt,category:"Content",events:{"wf-dataframe-add":{desc:"Capture adding a row.",stub:ta.trim()},"wf-dataframe-update":{desc:"Capture a cell change.",stub:ea.trim()},"wf-dataframe-action":{desc:"Remove or open a row.",stub:aa.trim()}},fields:{dataframe:{name:"Data",desc:"Must be a state reference to a Pandas dataframe or PyArrow table. Alternatively, a URL for an Arrow IPC file.",type:D.Text,default:Et},showIndex:{name:"Show index",desc:"Shows the dataframe's index. If an Arrow table is used, shows the zero-based integer index.",type:D.Text,default:"yes",options:{yes:"yes",no:"no"}},enableSearch:{name:"Enable search",type:D.Text,default:"no",options:{yes:"yes",no:"no"}},enableRecordAdd:{name:"Enable adding a record",type:D.Text,default:"no",options:{yes:"yes",no:"no"}},enableRecordUpdate:{name:"Enable updating a record",type:D.Text,default:"no",options:{yes:"yes",no:"no"}},enableDownload:{name:"Enable download",desc:"Allows the user to download the data as CSV.",type:D.Text,default:"no",options:{yes:"yes",no:"no"}},actions:{name:"Actions",desc:"Define rows actions",type:D.KeyValue,default:JSON.stringify({remove:"Remove",open:"Open"})},useMarkdown:{name:"Use Markdown",type:D.Text,desc:"If active, the output will be sanitized; unsafe elements will be removed.",options:{yes:"yes",no:"no"},default:"no"},displayRowCount:{name:"Display row count",desc:"Specifies how many rows to show simultaneously.",type:D.Number,category:te.Style,default:"10"},wrapText:{name:"Wrap text",type:D.Text,category:te.Style,desc:"Not wrapping text allows for an uniform grid, but may be inconvenient if your data contains longer text fields.",options:{yes:"yes",no:"no"},default:"no"},primaryTextColor:ze,secondaryTextColor:Ke,accentColor:et,separatorColor:tt,dataframeBackgroundColor:{name:"Background",type:D.Color,category:te.Style,default:"#ffffff",applyStyleVariable:!0},fontStyle:{name:"Font style",type:D.Text,category:te.Style,options:{normal:"normal",monospace:"monospace"},default:"normal"},cssClasses:at}}},oa=O({...na,__name:"CoreDataframe",setup(e){Ue(t=>({"34d941f2":q.value?"sticky":"unset"}));const n=1e3,o=36,r=58,v=80,A=300,a=fe(ve.evaluatedFields),p=y(),k=y(),h=y();let _=null;const w=ae(null),b=ae([]),T=f(()=>a.showIndex.value=="yes"),i=f(()=>a.actions.value),d=ae(null),E=y(0),x=y([]);let g=null;const j=fe(ve.core),L=fe(ve.instancePath),{handleUpdateCell:V,handleAddRow:U,handleActionRow:se,isBusy:re}=Tt(j,L,p,w),P=f(()=>ce.value||re.value),F=f(()=>{var t;return w.value?(t=w.value)==null?void 0:t.columnNames():[]}),le=f(()=>F.value.filter(t=>b.value.includes(t))),ie=f(()=>F.value.filter(s=>{if(s===S)return!1;const m=b.value.includes(s),c=ke.test(s);return!(m&&c)})),pe=f(()=>(T.value?1:0)+ie.value.length),Y=f(()=>{var t;return((t=w.value)==null?void 0:t.numRows())??0}),q=f(()=>Y.value>n),Q=f(()=>Math.min(a.displayRowCount.value,Y.value)),we=f(()=>Object.keys(a.actions.value||{}).length>0),De=f(()=>a.useMarkdown.value=="yes"),Se=f(()=>a.enableRecordUpdate.value=="yes"),de=f(()=>a.enableRecordAdd.value=="yes"),z=f(()=>{let t;return a.wrapText.value=="yes"?t=Y.value-1:t=Y.value-Q.value,Math.min(Math.ceil(E.value*t),t)}),ye=f(()=>{if(!w.value)return null;const t=q.value?z.value:0,s=q.value?Q.value:n,m=w.value.objects({offset:t,limit:s}),c=w.value.indices().slice(z.value,z.value+Q.value);return{data:m,indices:c}}),be=f(()=>{let t=we.value?"16px ":"";return x.value.length==0?t+=`repeat(${pe.value}, minmax(min-content, 1fr))`:t+=x.value.map(s=>`${Math.max(s,v)}px`).join(" "),t}),We=f(()=>{const t=a.fontStyle.value;return{"min-height":`${(1+a.displayRowCount.value+Number(de.value??!1))*o}px`,"max-height":`${(Q.value+1+Number(de.value??!1))*o}px`,"font-family":t=="monospace"?"monospace":void 0,"grid-template-rows":`${o}px repeat(${Q.value}, min-content) ${r}px`}}),Te=f(()=>({top:`${o*Y.value}px`}));function je(){const t=h.value.scrollTop;E.value=t/(h.value.scrollHeight-h.value.clientHeight)}function Fe(){h.value.scrollTop=0}async function ue(){var s;x.value=[],await ne();const t=(s=h.value)==null?void 0:s.querySelectorAll("[data-writer-grid-col]");t==null||t.forEach(m=>{const c=m,C=c.dataset.writerGridCol,{width:B}=c.getBoundingClientRect(),R=Math.min(B,A);x.value[C]=R})}function Xe(t,s){var B,R;if(t.target.classList.contains("widthAdjuster"))return;if(((B=d.value)==null?void 0:B.columnName)!==s){d.value={columnName:s,descending:!1};return}if((R=d.value)==null?void 0:R.descending){d.value=null;return}d.value={columnName:s,descending:!d.value.descending}}function Ve(t){const s=t.schema.metadata.get("pandas");return s?JSON.parse(s).index_columns:[]}const ce=y(!1);async function he(){ce.value=!0;const t=await M(()=>import("./index-5u5REPT4.js"),__vite__mapDeps([0,1]),import.meta.url),{tableFromIPC:s}=await M(()=>import("./Arrow.dom-GBJpMYQS.js"),__vite__mapDeps([2,1]),import.meta.url),m=a.dataframe.value;try{const B=await(await(await fetch(m)).blob()).arrayBuffer(),R=s(B);b.value=Ve(R),_=t.fromArrow(R),w.value=_.derive({[S]:()=>t.op.row_number()})}catch(c){console.error("Couldn't load dataframe from Arrow URL.",c)}finally{ce.value=!1}}async function Oe(){const t=await M(()=>import("./index-5u5REPT4.js"),__vite__mapDeps([0,1]),import.meta.url),s=w.value.select(t.not(S)).toCSV(),m=document.createElement("a"),c=new Blob([s],{type:"text/csv"}),C=URL.createObjectURL(c);m.href=C,m.download="data.csv",m.click(),URL.revokeObjectURL(C)}async function Me(){const t=await M(()=>import("./index-5u5REPT4.js"),__vite__mapDeps([0,1]),import.meta.url);if(d.value===null){w.value=w.value.unorder();return}let s;d.value.descending?s=t.desc(d.value.columnName):s=d.value.columnName,w.value=w.value.orderby(s)}async function Ge(t){const s=t.target.value;if(!s)w.value=_;else{const m=new RegExp(s,"i"),C="(d, $) => "+_.columnNames().map(R=>`aq.op.match(d.${R}, $.pattern) !== null`).join(" || "),B=await M(()=>import("./index-5u5REPT4.js"),__vite__mapDeps([0,1]),import.meta.url);w.value=_.params({pattern:m,filterS:C}).filter(C).derive({[S]:()=>B.op.row_number()})}await ne(),Fe()}async function ge(t){if(t.buttons!==1){g=null;return}const s=t.target;if(!p.value.contains(s))return;if(g===null&&s.classList.contains("widthAdjuster")){const Ne=s.closest(".cell");g=parseInt(Ne.dataset.writerGridCol)}else if(g===null)return;const m=h.value.querySelector(`[data-writer-grid-col="${g}"]`),c=m.querySelector(".widthAdjuster"),{width:C}=c.getBoundingClientRect(),{left:B}=m.getBoundingClientRect(),K=t.clientX-B+C/2;x.value[g]=K}return ee(a.dataframe,()=>{he()}),ee(d,async()=>{await Me()}),ee(pe,()=>{ue()}),ee(a.wrapText,()=>{ue()}),_e(async()=>{await he(),document.addEventListener("mousemove",ge),k.value&&new ResizeObserver(ue).observe(k.value,{box:"border-box"})}),xe(()=>{document.removeEventListener("mousemove",ge)}),(t,s)=>{var m;return l(),u("div",{ref_key:"rootEl",ref:p,class:"CoreDataframe","aria-busy":P.value},[I("div",{ref_key:"toolsEl",ref:k,class:"tools"},[W(a).enableSearch.value==="yes"?(l(),u("div",Mt,[Ce(Ye,{class:"search",placeholder:"Search","left-icon":"search",onChange:Ge})])):X("",!0),W(a).enableDownload.value==="yes"?(l(),J(Qe,{key:1,title:"Download",class:"download",onClick:Oe},{default:Ie(()=>[Gt]),_:1})):X("",!0)],512),I("div",{ref_key:"gridContainerEl",ref:h,class:"gridContainer",onScroll:je},[I("div",{class:Ae(["grid",{scrolled:z.value>0,wrapText:W(a).wrapText.value==="yes"}]),style:$(We.value)},[I("div",{style:$({display:"grid","grid-template-columns":be.value})},[we.value?(l(),u("div",Nt)):X("",!0),T.value?(l(),u("div",Zt,Jt)):X("",!0),(l(!0),u(G,null,oe(ie.value,(c,C)=>{var B,R;return l(),u("div",{key:c,"data-writer-grid-col":C+(T.value?1:0),class:"cell headerCell",onClick:K=>Xe(K,c)},[I("div",Yt,N(c),1),He(I("div",Qt,[I("span",Ht,N((B=d.value)!=null&&B.descending?"arrow_upward":"arrow_downward"),1)],512),[[Pe,((R=d.value)==null?void 0:R.columnName)==c]]),Pt],8,Ut)}),128))],4),(l(!0),u(G,null,oe((m=ye.value)==null?void 0:m.data,(c,C)=>(l(),J(St,{key:C,style:$({"grid-template-columns":be.value}),row:c,actions:i.value,"use-markdown":De.value,editable:Se.value&&!P.value,columns:ie.value,"show-index":T.value,"index-text":ye.value.indices[C]??le.value.map(B=>c[B]).join(", "),onAction:W(se),onChange:W(V)},null,8,["style","row","actions","use-markdown","editable","columns","show-index","index-text","onAction","onChange"]))),128)),de.value?(l(),u("div",qt,[Ce(qe,{"aria-label":"Create a new row at the end",size:"small",variant:"tertiary",onClick:W(U)},{default:Ie(()=>[zt,me(" Add a row ")]),_:1},8,["onClick"])])):X("",!0)],6),q.value?(l(),u("div",{key:0,class:"endpoint",style:$(Te.value)},null,4)):X("",!0)],544)],8,Ot)}}}),sa=Z(oa,[["__scopeId","data-v-87e291ff"]]);export{sa as default};
