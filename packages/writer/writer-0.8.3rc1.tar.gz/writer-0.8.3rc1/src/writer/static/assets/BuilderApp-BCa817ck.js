function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderEmbeddedCodeEditor-6uOUaSIN.js","./toggleHighContrast-BFzHrfhp.js","./index-YmO2-Soz.js","./index-DO1u5V1G.css","./toggleHighContrast-DZe_BnT2.css","./BuilderEmbeddedCodeEditor-BhsQAbDv.css","./BuilderSettings-DlzELXHB.js","./instancePath-BsbOTTI8.js","./marked.esm-273vDTCT.js","./BuilderSettings-BaqGu-am.css","./BuilderSidebar-BNRmN1za.js","./BuilderSidebar-DliAwn4p.css","./ComponentRenderer-CnHg6nQo.js","./ComponentRenderer-BOotx4DP.css","./BuilderInstanceTracker-BpaDF2EB.js","./BuilderInstanceTracker-BMktodl2.css","./BuilderInsertionOverlay-Dc4ulvpg.js","./BuilderInsertionOverlay-C2m7KHIN.css","./BuilderInsertionLabel-fssmpGwW.js","./BuilderInsertionLabel-BQrPp9vH.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as T,i as E,a as x,c as A,r as L,o,e as p,f as e,q as $,x as D,J as w,y as z,z as F,_ as P,K as De,b as S,L as u,t as k,m as b,n as I,W as G,C as X,F as K,s as Q,T as ie,M as Y,N as te,k as oe,O as re,l as de,v as Ae,D as ce,P as ee,Q as Me,R as ae,S as Re,w as le,U as V,I as O,V as He,X as Ke,Y as Ve,Z as Oe}from"./index-YmO2-Soz.js";import{marked as Ue}from"./marked.esm-273vDTCT.js";const ze="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M34.0187%2028.9434L37.2255%2015.7128H32.7659L30.812%2015.7128L34.0187%2028.9434Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.4266%2015.7128H20.967L25.4266%2034.1126L27.4085%2034.1126H31.8681L27.4085%2015.7128H25.4266L25.4266%2015.7128Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.5635%2015.7129H13.1038L13.1039%2015.7132H11.1219L15.5816%2034.113H20.0413L20.0412%2034.1126H22.0231L17.5635%2015.7129Z'%20fill='white'/%3e%3c/svg%3e",ne=l=>(z("data-v-3f627d92"),l=l(),F(),l),Fe={class:"BuilderSwitcher"},Ne=ne(()=>e("i",{class:"icon material-symbols-outlined"}," brush ",-1)),We=ne(()=>e("i",{class:"icon material-symbols-outlined"}," linked_services ",-1)),je=ne(()=>e("i",{class:"icon material-symbols-outlined"}," preview ",-1)),Ge=T({__name:"BuilderSwitcher",setup(l){const _=E(x.core),s=E(x.builderManager),d=A(()=>_.featureFlags.value.includes("workflows"));let a=L(null);const v=r=>{const i=s.getMode();i!=r&&(a.value=r,s.setMode(r),(r=="preview"||i=="workflows"||r=="workflows")&&s.setSelection(null))},m=A(()=>s.getMode());return(r,i)=>(o(),p("div",Fe,[e("div",{"data-automation-action":"set-mode-ui",class:D({active:m.value=="ui"}),onClick:i[0]||(i[0]=n=>v("ui"))},[Ne,$(" UI ")],2),d.value?(o(),p("div",{key:0,"data-automation-action":"set-mode-workflows",class:D({active:m.value=="workflows"}),onClick:i[1]||(i[1]=n=>v("workflows"))},[We,$(" Workflows ")],2)):w("",!0),e("div",{class:D({active:m.value=="preview"}),"data-automation-action":"set-mode-preview",onClick:i[2]||(i[2]=n=>v("preview"))},[je,$(" Preview ")],2)]))}}),Ze=P(Ge,[["__scopeId","data-v-3f627d92"]]),Je=l=>(z("data-v-d1ea0bf1"),l=l(),F(),l),qe={class:"main"},Xe={class:"titleContainer"},Ye={key:0,class:"material-symbols-outlined"},Qe=Je(()=>e("i",{class:"material-symbols-outlined"},"close",-1)),et={class:"slotContainer"},tt={key:0,class:"actionContainer"},ot=T({__name:"BuilderModal",props:{modalTitle:{},icon:{},closeAction:{},menuActions:{}},setup(l){const _=l,{modalTitle:s,icon:d,closeAction:a,menuActions:v}=De(_),m=r=>{r.key=="Escape"&&a.value.fn()};return(r,i)=>{var n,f;return o(),S(ie,{to:"#modal"},[e("div",{class:"BuilderModal",tabindex:"-1",onKeydown:m},[e("div",qe,[e("div",Xe,[u(d)?(o(),p("i",Ye,k(u(d)),1)):w("",!0),e("h2",null,k(u(s)),1),b(G,{variant:"neutral",size:"icon",title:((n=u(a))==null?void 0:n.desc)??"Close",onClick:u(a).fn},{default:I(()=>[Qe]),_:1},8,["title","onClick"])]),e("div",et,[X(r.$slots,"default",{},void 0,!0)]),((f=u(v))==null?void 0:f.length)>0?(o(),p("div",tt,[(o(!0),p(K,null,Q(u(v),(h,t)=>(o(),S(G,{key:t,variant:"primary",size:"small",onClick:h.fn},{default:I(()=>[$(k(h.desc),1)]),_:2},1032,["onClick"]))),128))])):w("",!0)])],32)])}}}),ue=P(ot,[["__scopeId","data-v-d1ea0bf1"]]),nt={class:"BuilderStateExplorer"},st=T({__name:"BuilderStateExplorer",setup(l){const _=E(x.core);return(s,d)=>(o(),p("div",nt,[b(Y,{data:u(_).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),at=P(st,[["__scopeId","data-v-eafb7b97"]]),q=l=>(z("data-v-8d9419a7"),l=l(),F(),l),lt={class:"BuilderHeader"},it=q(()=>e("img",{src:ze,alt:"Writer Framework logo"},null,-1)),rt={class:"undoRedo"},dt=["title","disabled"],ct=q(()=>e("i",{class:"material-symbols-outlined"}," undo ",-1)),ut=["title","disabled"],pt=q(()=>e("i",{class:"material-symbols-outlined"}," redo ",-1)),_t=q(()=>e("i",{class:"material-symbols-outlined"}," mystery ",-1)),vt=q(()=>e("div",{class:"gap"},null,-1)),mt=["title"],ft={key:0},ht=T({__name:"BuilderHeader",setup(l){const _=L(null),s=E(x.core),d=E(x.builderManager),{undo:a,redo:v,getUndoRedoSnapshot:m}=te(s,d),r=L(!1),i=A(()=>m()),n=()=>{let t="";switch(s.syncHealth.value){case"offline":t+="Offline. Not syncing.";break;case"connected":t+="Online. Syncing...";break;case"idle":t+="Sync not initialised.";break;case"suspended":t+="Sync suspended.";break}return s.featureFlags.value.length>0&&(t+=` Feature flags: ${s.featureFlags.value.join(", ")}`),t};function f(){r.value=!0}const h={desc:"Close",fn:()=>{r.value=!1}};return(t,y)=>(o(),p("div",lt,[it,b(Ze),e("div",rt,[e("button",{class:"undo",title:i.value.isUndoAvailable?`Undo ${i.value.undoDesc}`:"Nothing to undo",disabled:!i.value.isUndoAvailable,onClick:y[0]||(y[0]=C=>u(a)())},[ct,$(" Undo ")],8,dt),e("button",{class:"redo",title:i.value.isRedoAvailable?`Redo ${i.value.redoDesc}`:"Nothing to redo",disabled:!i.value.isRedoAvailable,onClick:y[1]||(y[1]=C=>u(v)())},[pt,$(" Redo ")],8,ut)]),e("div",null,[e("button",{onClick:f},[_t,$(" State Explorer ")]),r.value?(o(),S(ue,{key:0,"close-action":h,icon:"mystery","modal-title":"State Explorer"},{default:I(()=>[b(at)]),_:1})):w("",!0)]),vt,e("div",{class:D(["syncHealth",u(s).syncHealth.value]),title:n()},[e("i",{ref_key:"syncHealthIcon",ref:_,class:"material-symbols-outlined icon"},"sync",512),u(s).syncHealth.value=="offline"?(o(),p("span",ft,"Offline")):w("",!0)],10,mt)]))}}),yt=P(ht,[["__scopeId","data-v-8d9419a7"]]),gt={class:"text"},wt=200,kt=4,bt=T({__name:"BuilderTooltip",setup(l){const _=L(null),s=L(!1),d=L(null);let a=null,v=null;const m=L("top"),r=L({top:0,left:0});async function i(){d.value=a.dataset.writerTooltip;const t=a.dataset.writerTooltipGap?parseInt(a.dataset.writerTooltipGap):kt;s.value=!0,await ee();const{x:y,y:C,width:H,height:N}=a.getBoundingClientRect(),{width:Z,height:J}=_.value.getBoundingClientRect();switch(m.value){case"top":r.value.top=C-J-t,r.value.left=y+H/2-Z/2;break;case"right":r.value.top=C+N/2-J/2,r.value.left=y+H+t;break;case"left":r.value.left=y-Z-t,r.value.top=C+N/2-J/2;break;case"bottom":r.value.top=C+N+t,r.value.left=y+H/2-Z/2;break}}function n(t){const C=t.target.closest("[data-writer-tooltip]");if(C)a!==C&&(s.value=!1);else{s.value=!1,a=null;return}a=C,m.value=a.dataset.writerTooltipPlacement??"top",setTimeout(()=>f(C),wt)}async function f(t){t===a&&(v==null||v.disconnect(),v=new MutationObserver(i),v.observe(a,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement"]}),i())}const h=A(()=>{const{top:t,left:y}=r.value;return{top:`${t}px`,left:`${y}px`}});return oe(()=>{document.documentElement.addEventListener("mouseover",n)}),re(()=>{document.documentElement.removeEventListener("mouseover",n),v==null||v.disconnect()}),(t,y)=>de((o(),p("div",{ref_key:"rootEl",ref:_,class:"BuilderTooltip",style:ce(h.value)},[e("div",{class:D(["arrow",m.value])},null,2),e("div",gt,k(d.value),1)],4)),[[Ae,s.value]])}}),$t=P(bt,[["__scopeId","data-v-273d531a"]]),Ct={class:"BuilderAsyncLoader"},St=T({__name:"BuilderAsyncLoader",setup(l){return(_,s)=>(o(),p("div",Ct,[b(Me)]))}}),U=P(St,[["__scopeId","data-v-bb820549"]]),It={class:"collapser"},Bt={class:"material-symbols-outlined"},Et={class:"title"},xt={class:"titleCompanion"},Lt=["data-order"],Tt={class:"actions"},Pt={class:"actionsCompanion"},Dt={class:"material-symbols-outlined"},At={class:"mainContents"},Mt=T({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{}},setup(l){const _=E(x.builderManager),s=["code","log"],d=l,a=A(()=>!_.openPanels.value.has(d.panelId)),v=A(()=>s.indexOf(d.panelId));function m(n){if(_.openPanels.value.has(n)){_.openPanels.value.delete(n);return}_.openPanels.value.add(n)}function r(n){const f=Re(n);if(f&&n.key==d.keyboardShortcutKey.toLowerCase()){n.preventDefault(),m(d.panelId);return}d.actions.forEach(h=>{if(!h.keyboardShortcut)return;const{key:t,modifierKey:y}=h.keyboardShortcut;t.toLowerCase()==n.key&&(!f&&y||(n.preventDefault(),h.callback()))})}function i(n){if(!n)return"";let f=" (";return n.modifierKey&&(f+=ae()),f+=n.key,f+=")",f}return oe(async()=>{document.addEventListener("keydown",r)}),re(()=>{document.removeEventListener("keydown",r)}),(n,f)=>(o(),p("div",{class:D(["BuilderPanel",{collapsed:a.value}])},[e("div",It,[b(G,{variant:"neutral",size:"smallIcon","data-automation-action":"toggle-panel","data-automation-key":n.panelId,"data-writer-tooltip":`Toggle ${n.name} (${u(ae)()}${n.keyboardShortcutKey})`,onClick:f[0]||(f[0]=h=>m(n.panelId))},{default:I(()=>[e("i",Bt,k(a.value?"expand_less":"expand_more"),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),e("div",Et,k(n.name),1),e("div",xt,[X(n.$slots,"titleCompanion",{},void 0,!0)]),a.value?w("",!0):(o(),S(ie,{key:0,to:n.contentsTeleportEl},[e("div",{style:ce({order:v.value}),"data-order":v.value,class:"contents"},[e("div",Tt,[e("div",Pt,[X(n.$slots,"actionsCompanion",{},void 0,!0)]),(o(!0),p(K,null,Q(n.actions,(h,t)=>(o(),S(G,{key:t,"data-writer-tooltip":h.name+i(h.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:h.isDisabled,onClick:h.callback},{default:I(()=>[e("i",Dt,k(h.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),e("div",At,[X(n.$slots,"default",{},void 0,!0)])],12,Lt)],8,["to"]))],2))}}),pe=P(Mt,[["__scopeId","data-v-d7a2ef13"]]),Rt=T({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(l){const _=V({loader:()=>O(()=>import("./BuilderEmbeddedCodeEditor-6uOUaSIN.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),loadingComponent:U}),s=E(x.core),d=L(s.runCode.value),a=L(null),v=L(!1),m=A(()=>[{icon:"save",name:"Save and run",keyboardShortcut:{modifierKey:!0,key:"S"},callback:()=>{n()},isDisabled:v.value}]);le(s.runCode,f=>{d.value=f}),le(s.sessionTimestamp,()=>{v.value=!1,!i()&&(a.value=null)});function r(){a.value=null}function i(){return s.runCode.value==d.value}async function n(){a.value={type:"neutral",message:"Processing..."};try{v.value=!0,await s.sendCodeSaveRequest(d.value)}catch{a.value={type:"error",message:"Code hasn't been saved."},v.value=!1;return}a.value={type:"success",message:"Saved."}}return(f,h)=>(o(),S(pe,{"panel-id":"code",name:"Code","contents-teleport-el":f.contentsTeleportEl,actions:m.value,scrollable:!1,"keyboard-shortcut-key":"J",class:"BuilderCodePanel"},{actionsCompanion:I(()=>[a.value?(o(),p("div",{key:0,class:D(["status",a.value.type])},k(a.value.message),3)):w("",!0)]),default:I(()=>[b(u(_),{modelValue:d.value,"onUpdate:modelValue":[h[0]||(h[0]=t=>d.value=t),r],variant:"full",language:"python",disabled:v.value},null,8,["modelValue","disabled"])]),_:1},8,["contents-teleport-el","actions"]))}}),Ht=P(Rt,[["__scopeId","data-v-171dd34e"]]),M=l=>(z("data-v-d7da9619"),l=l(),F(),l),Kt={class:"BuilderLogWorkflowExecution"},Vt=M(()=>e("div",{class:"marker top"},null,-1)),Ot=M(()=>e("div",{class:"marker bottom"},null,-1)),Ut={class:"item"},zt={class:"name"},Ft=M(()=>e("i",{class:"material-symbols-outlined"},"jump_to_element",-1)),Nt={class:"outcome"},Wt={class:"result"},jt={class:"detailsModalContent"},Gt=M(()=>e("h2",null,"Result",-1)),Zt=M(()=>e("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),Jt={class:"data","data-automation-key":"result"},qt={key:1,class:"nothing"},Xt=M(()=>e("h2",null,"Execution environment",-1)),Yt=M(()=>e("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),Qt={class:"data"},eo={key:1,class:"nothing"},to=M(()=>e("h2",null,"Return value",-1)),oo=M(()=>e("p",null," The value being returned, which is used to determine the result of 'Run workflow' blocks and 'Chat completion' tool calls. ",-1)),no={class:"data","data-automation-key":"return-value"},so=M(()=>e("i",{class:"material-symbols-outlined"},"find_in_page",-1)),ao={class:"time"},lo={key:0,class:"message markdown"},io=T({__name:"BuilderLogWorkflowExecution",props:{executionLog:{}},setup(l){const _=E(x.core),s=E(x.builderManager),{goToComponentParentPage:d}=te(_,s),a=l,v=L(null),m=A(()=>({summary:[...a.executionLog.summary.map(f=>({...f,component:_.getComponentById(f.componentId),componentDef:_.getComponentById(f.componentId)?_.getComponentDefinition(_.getComponentById(f.componentId).type):void 0}))]}));async function r(n){s.setMode("workflows"),await ee(),d(n),await ee(),s.setSelection(n,void 0,"log")}function i(n){return n<0?"N/A":n<.1?"< 0.1s":`${n.toFixed(2)}s`}return(n,f)=>{const h=He("dompurify-html");return o(),p("div",Kt,[(o(!0),p(K,null,Q(m.value.summary,(t,y)=>{var C,H;return o(),p("div",{key:y,class:"row"},[Vt,Ot,e("div",Ut,[e("div",zt,[$(k(t.componentDef.name)+" ",1),b(G,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:N=>r(t.componentId)},{default:I(()=>[Ft]),_:2},1032,["onClick"])]),e("div",Nt,[e("div",{class:D(["ball",(C=t.componentDef.outs[t.outcome])==null?void 0:C.style])},null,2),$(" "+k(((H=t.componentDef.outs[t.outcome])==null?void 0:H.name)??t.outcome),1)]),e("div",Wt,[v.value==y?(o(),S(ue,{key:0,"close-action":{desc:"Close",fn:()=>v.value=null},icon:"find_in_page","modal-title":"Details"},{default:I(()=>[e("div",jt,[e("div",null,[Gt,Zt,e("div",Jt,[t!=null&&t.result?(o(),S(Y,{key:0,data:t.result,"initial-depth":1,class:"data"},null,8,["data"])):(o(),p("div",qt,"No result."))])]),e("div",null,[Xt,Yt,e("div",Qt,[t!=null&&t.executionEnvironment?(o(),S(Y,{key:0,data:t.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(o(),p("div",eo," Empty execution environment. "))])]),e("div",null,[to,oo,e("div",no,[t!=null&&t.returnValue?(o(),S(Y,{key:0,data:t.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(o(),p(K,{key:1},[$(" No return value. ")],64))])])])]),_:2},1032,["close-action"])):w("",!0),t.result||t.returnValue||t.executionEnvironment?(o(),S(G,{key:1,variant:"special",size:"small",onClick:()=>v.value=y},{default:I(()=>[so,$(" Details ")]),_:2},1032,["onClick"])):w("",!0)]),e("div",ao,k(i(t.executionTimeInSeconds)),1),t.message?de((o(),p("div",lo,null,512)),[[h,u(Ue).parse(t.message)]]):w("",!0)])])}),128))])}}}),ro=P(io,[["__scopeId","data-v-d7da9619"]]),_e=l=>(z("data-v-932b439f"),l=l(),F(),l),co={class:"BuilderLogIndicator"},uo={key:0,class:"number error"},po=_e(()=>e("div",{class:"icon"},[e("i",{class:"material-symbols-outlined"},"error")],-1)),_o={key:1,class:"number info"},vo=_e(()=>e("div",{class:"icon"},[e("i",{class:"material-symbols-outlined"},"info")],-1)),mo=T({__name:"BuilderLogIndicator",setup(l){const _=E(x.builderManager),s=A(()=>_.getLogEntries().reduce((d,a)=>(a.type in d||(d[a.type]=0),d[a.type]++,d),{}));return(d,a)=>(o(),p("div",co,[s.value.error>0?(o(),p("div",uo,[po,$(" "+k(s.value.error??0),1)])):w("",!0),s.value.info>0?(o(),p("div",_o,[vo,$(" "+k(s.value.info??0),1)])):w("",!0)]))}}),fo=P(mo,[["__scopeId","data-v-932b439f"]]),ho=l=>(z("data-v-ad3fc955"),l=l(),F(),l),yo={key:0,class:"entries"},go={class:"icon"},wo={key:0,class:"material-symbols-outlined"},ko={key:1,class:"material-symbols-outlined"},bo={class:"title"},$o={class:"time"},Co={class:"content"},So={key:0,class:"codeContainer"},Io={key:1,class:"emptyMessage"},Bo=ho(()=>e("div",null,[$(" Exceptions and other relevant messages will be shown here."),e("br"),$("Also, you can include print statements in event handlers to create log entries. ")],-1)),Eo=[Bo],xo=T({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(l){const _=E(x.builderManager),s=[{icon:"delete",name:"Clear log",callback:()=>{_.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],d=A(()=>_.getLogEntries());return(a,v)=>(o(),S(pe,{"panel-id":"log",name:"Log","contents-teleport-el":a.contentsTeleportEl,actions:s,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel"},{titleCompanion:I(()=>[b(fo)]),default:I(()=>[d.value.length>0?(o(),p("div",yo,[(o(!0),p(K,null,Q(d.value,(m,r)=>(o(),p(K,{key:r},[e("div",{class:D(["entry",m.type])},[e("div",go,[m.type=="error"?(o(),p("i",wo,"error")):(o(),p("i",ko,"info"))]),e("div",bo,k(m.title)+k(m.repeated>0?` Â· Repeated ${m.repeated} times`:""),1),e("div",$o,k(m.timestampReceived.toLocaleTimeString()),1),e("div",Co,[$(k(m.message)+" ",1),m.code?(o(),p("div",So,[e("code",null,k(m.code),1)])):w("",!0)])],2),m.workflowExecution?(o(),S(ro,{key:0,"execution-log":m.workflowExecution},null,8,["execution-log"])):w("",!0)],64))),128))])):w("",!0),d.value.length==0?(o(),p("div",Io,Eo)):w("",!0)]),_:1},8,["contents-teleport-el"]))}}),Lo=P(xo,[["__scopeId","data-v-ad3fc955"]]),To={class:"switches"},Po=T({__name:"BuilderPanelSwitcher",setup(l){const _=E(x.builderManager),s=L(null);return(d,a)=>(o(),p("div",{class:D(["BuilderPanelSwitcher",{openPanels:u(_).openPanels.value.size>0}])},[e("div",{ref_key:"screenEl",ref:s,class:"screen"},null,512),e("div",To,[b(Ht,{"contents-teleport-el":s.value},null,8,["contents-teleport-el"]),b(Lo,{"contents-teleport-el":s.value},null,8,["contents-teleport-el"])])],2))}}),Do=P(Po,[["__scopeId","data-v-0bc76188"]]),Ao=l=>(z("data-v-bec72e29"),l=l(),F(),l),Mo={class:"BuilderApp",tabindex:"-1"},Ro={key:0,class:"sidebar"},Ho={class:"builderMain"},Ko={class:"rendererWrapper"},Vo=Ao(()=>e("div",{id:"modal"},null,-1)),Oo=T({__name:"BuilderApp",setup(l){Ke(c=>({"0cee0d72":u(i).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px"}));const _=V({loader:()=>O(()=>import("./BuilderSettings-DlzELXHB.js").then(c=>c.a),__vite__mapDeps([6,2,3,7,8,9]),import.meta.url),loadingComponent:U}),s=V({loader:()=>O(()=>import("./BuilderSidebar-BNRmN1za.js"),__vite__mapDeps([10,2,3,11]),import.meta.url),loadingComponent:U}),d=V({loader:()=>O(()=>import("./ComponentRenderer-CnHg6nQo.js"),__vite__mapDeps([12,2,3,7,13]),import.meta.url),loadingComponent:U}),a=V({loader:()=>O(()=>import("./BuilderInstanceTracker-BpaDF2EB.js"),__vite__mapDeps([14,2,3,15]),import.meta.url),loadingComponent:U}),v=V({loader:()=>O(()=>import("./BuilderInsertionOverlay-Dc4ulvpg.js"),__vite__mapDeps([16,2,3,17]),import.meta.url),loadingComponent:U}),m=V({loader:()=>O(()=>import("./BuilderInsertionLabel-fssmpGwW.js"),__vite__mapDeps([18,2,3,19]),import.meta.url),loadingComponent:U}),r=E(x.core),i=E(x.builderManager),{candidateId:n,candidateInstancePath:f,isCandidacyConfirmed:h,dropComponent:t,assignInsertionCandidacy:y,removeInsertionCandidacy:C}=Ve(r),{createAndInsertComponent:H,undo:N,redo:Z,moveComponent:J,moveComponentUp:ve,moveComponentDown:me,cutComponent:fe,isPasteAllowed:he,isCopyAllowed:ye,isCutAllowed:ge,isDeleteAllowed:we,isGoToParentAllowed:ke,pasteComponent:be,copyComponent:$e,removeComponentSubtree:Ce,goToParent:Se}=te(r,i),W=A(()=>i.getMode()),Ie=A(()=>{var c;return(c=i.getSelection())==null?void 0:c.componentId});function Be(c){if(c.key=="Escape"){i.setSelection(null);return}const B=Oe()?c.metaKey:c.ctrlKey;if(c.target.closest("textarea, input, select"))return;if(c.key=="z"&&B){c.preventDefault(),N();return}if(c.key=="y"&&B){c.preventDefault(),Z();return}if(!i.isSelectionActive())return;const{componentId:g,instancePath:j}=i.getSelection();if(c.key=="Delete"){if(!we(g))return;Ce(g);return}if(c.key=="ArrowUp"&&B&&c.shiftKey){if(!ke(g))return;Se(g,j);return}if(c.key=="ArrowUp"&&B){ve(g);return}if(c.key=="ArrowDown"&&B){me(g);return}if(c.key=="v"&&B){if(!he(g))return;be(g);return}if(c.key=="c"&&B){if(!ye(g))return;$e(g);return}if(c.key=="x"&&B){if(!ge(g))return;fe(g);return}}function Ee(c){W.value!=="preview"&&y(c)}function xe(c){if(W.value==="preview")return;i.setSelection(null);const B=t(c);if(!B)return;const{draggedType:R,draggedId:g,parentId:j,position:se}=B;g?J(g,j,se):H(R,j,se)}function Le(c){if(W.value==="preview"||c.target.closest("[data-writer-unselectable]"))return;const R=c.target.closest("[data-writer-id]");if(!R)return;const g=R.dataset.writerId,j=R.dataset.writerInstancePath;g!==i.getSelectedId()&&(c.preventDefault(),c.stopPropagation(),i.setSelection(g,j,"click"))}const Te=c=>{if(W.value==="preview")return;const R=c.target.closest("[data-writer-id]").dataset.writerId,{type:g}=r.getComponentById(R);c.dataTransfer.setData(`application/json;writer=${g},${R}`,"{}")};function Pe(c){i.setSelection(null),C(c)}return oe(()=>{document.addEventListener("keydown",Be)}),(c,B)=>(o(),p("div",Mo,[e("div",{class:D(["mainGrid",{openPanels:u(i).openPanels.value.size>0}])},[b(yt,{class:"builderHeader"}),W.value!=="preview"?(o(),p("div",Ro,[b(u(s))])):w("",!0),e("div",Ho,[e("div",Ko,[b(u(d),{class:D(["componentRenderer",{settingsOpen:u(i).isSelectionActive()}]),onDragover:Ee,onDragstart:Te,onDragend:Pe,onDrop:xe,onClickCapture:Le},null,8,["class"])]),u(i).isSelectionActive()?(o(),S(u(_),{key:Ie.value??"noneSelected"})):w("",!0)]),b(Do,{class:"panelSwitcher"})],2),W.value!=="preview"?(o(),p(K,{key:0},[u(n)&&!u(h)?(o(),p(K,{key:0},[(o(),S(u(a),{key:u(f),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":u(f),"match-size":!0},{default:I(()=>[b(u(v))]),_:1},8,["instance-path"])),(o(),S(u(a),{key:u(f),class:"insertionLabelTracker","instance-path":u(f),"vertical-offset-pixels":-48},{default:I(()=>[b(u(m),null,{default:I(()=>[$(k(u(r).getComponentDefinition(u(r).getComponentById(u(n)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):w("",!0)],64)):w("",!0),Vo,b($t,{id:"tooltip"})]))}}),Uo=P(Oo,[["__scopeId","data-v-bec72e29"]]),No=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"}));export{ue as B,U as a,No as b};
