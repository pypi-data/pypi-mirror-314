from pytest import fixture
from stmeasures.objects.geojson import GeoJSON

_sample_geojson = [{"_id":{"$oid":"662ef1c116c2a40c753d2b92"},"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"789d45496c43c436074375cd96a568a5d4d9f5482cd72ca57f944f9636b8d6b9","tiempo":"2020-01-01 00:00:00  a 2020-01-01 23:59:59"},"geometry":{"type":"LineString","coordinates":[[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.604202,-99.017905],[19.604086,-99.017965],[19.603831,-99.018238],[19.604262,-99.018239],[19.603914,-99.01801],[19.603914,-99.01801],[19.604226,-99.018104],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.60434,-99.01823],[19.60434,-99.01823],[19.604339,-99.018213],[19.604339,-99.018213],[19.603914,-99.01801],[19.603914,-99.01801],[19.6044,-99.01824],[19.6044,-99.01824],[19.604409,-99.018246],[19.604409,-99.018246],[19.60392,-99.01802],[19.60392,-99.01802],[19.604201,-99.017677],[19.604201,-99.017677],[19.6042,-99.01769],[19.6042,-99.01769],[19.604043,-99.018005],[19.604043,-99.018005],[19.60403,-99.01801],[19.60403,-99.01801],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.60489,-99.0166],[19.60489,-99.0166],[19.60489,-99.016597],[19.60489,-99.016597],[19.603914,-99.01801],[19.603914,-99.01801],[19.60409,-99.01807],[19.60409,-99.01807],[19.604097,-99.01808],[19.604097,-99.01808],[19.60392,-99.01802],[19.60392,-99.01802],[19.604111,-99.017959],[19.604111,-99.017959],[19.60412,-99.01797],[19.60412,-99.01797],[19.60448,-99.01814],[19.60448,-99.01814],[19.604477,-99.018149],[19.604477,-99.018149],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.60418,-99.01801],[19.60418,-99.01801],[19.604175,-99.018007],[19.604175,-99.018007],[19.604262,-99.018239],[19.604262,-99.018239],[19.60425,-99.01825],[19.60425,-99.01825],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.604157,-99.017723],[19.604157,-99.017723],[19.60416,-99.01772],[19.60416,-99.01772],[19.604122,-99.018078],[19.604122,-99.018078],[19.60392,-99.01802],[19.60392,-99.01802],[19.603914,-99.01801],[19.603914,-99.01801],[19.60411,-99.01809],[19.60411,-99.01809]]}}]}]

_sample_geojson_2 = [{"_id":{"$oid":"662ef1c116c2a40c753d2b92"},"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"789d45496c43c436074375cd96a568a5d4d9f5482cd72ca57f944f9636b8d6b9","tiempo":"2020-01-01 00:00:00  a 2020-01-01 23:59:59"},"geometry":{"type":"LineString","coordinates":[[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801],[19.603914,-99.01801]]}}]},{"_id":{"$oid":"662ef1c116c2a40c753d2b93"},"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"99b0da0e21d47365810cb0db6858ea22d694c70334962294bc6b1d95892b59ac","tiempo":"2020-01-01 00:00:00  a 2020-01-01 23:59:59"},"geometry":{"type":"LineString","coordinates":[[19.60482,-99.016198],[19.60481,-99.016199],[19.60481,-99.016199],[19.60482,-99.016198],[19.60482,-99.016198],[19.60481,-99.0162],[19.60481,-99.0162],[19.60482,-99.016198],[19.60482,-99.016198],[19.60481,-99.0162],[19.60481,-99.0162],[19.60482,-99.016198],[19.60482,-99.016198],[19.60481,-99.016199],[19.60481,-99.016199],[19.60482,-99.016198],[19.60482,-99.016198],[19.60482,-99.016198],[19.60482,-99.016198],[19.60482,-99.016198],[19.60482,-99.016198],[19.60481,-99.0162],[19.60481,-99.0162],[19.60482,-99.016198],[19.60482,-99.016198],[19.60481,-99.0162],[19.60481,-99.0162]]}}]}]

@fixture(scope="class")
def geojson():
    return GeoJSON(_sample_geojson)

def test_intialized(geojson):
    assert geojson.data is not None
    assert geojson.trajectories is not None
    assert geojson.trajectories_list is not None

def test_trajectories(geojson):
    assert type(geojson[0]) is list
    assert type(geojson[0][0]) is tuple
    assert type(geojson[0][0][0]) is float
