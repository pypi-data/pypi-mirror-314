$id: https://controlman.repodynamics.com/schema/protocol
$schema: https://json-schema.org/draft/2020-12/schema
title: Document
description: |
  Configurations for an issue/PR protocol.
type: object
default: { }
additionalProperties: false
required: [ config, template, tasklist ]
properties:
  config:
    type: object
    default: { }
    additionalProperties: false
    required: [ start, end ]
    properties:
      start:
        default: |
          <details id="config"><summary>Config</summary>
          
          ```yaml
        $ref: https://jsonschemata.repodynamics.com/string/nonempty
      end:
        default: |
          
          ```
          
          </details>
        $ref: https://jsonschemata.repodynamics.com/string/nonempty
      default:
        type: object
        additionalProperties: false
        properties:
          pr_title:
            type: string
  inputs:
    type: object
    default: { }
    additionalProperties: false
    required: [ start, end ]
    properties:
      start:
        default: |
          <!-- BEGIN: inputs
        $ref: https://jsonschemata.repodynamics.com/string/nonempty
      end:
        default: |
          
          END: inputs -->
        $ref: https://jsonschemata.repodynamics.com/string/nonempty
  data:
    type: object
    additionalProperties:
      title: Datum
      description: Development protocol data.
      type: object
      additionalProperties: false
      required: [ value ]
      properties:
        start:
          default: '<!-- BEGIN: data.${{ .__key__ }}$ -->'
          $ref: https://jsonschemata.repodynamics.com/string/nonempty
        end:
          default: '<!-- END: data.${{ .__key__ }}$ -->'
          $ref: https://jsonschemata.repodynamics.com/string/nonempty
        value:
          type: string
          default: ''
        template:
          type: string
        template_type:
          type: string
          enum: [ prepend, append ]
          default: append
  tasklist:
    type: object
    default: {}
    additionalProperties: false
    properties:
      start:
        default: '<!-- BEGIN: tasklist -->'
        $ref: https://jsonschemata.repodynamics.com/string/nonempty
      end:
        default: '<!-- END: tasklist -->'
        $ref: https://jsonschemata.repodynamics.com/string/nonempty
      value:
        type: string
        default: |
          - [ ] commit-type: Summary of task 1.
            Description of task 1.
            - [ ] Summary of subtask 1.1.
              Description of subtask 1.1.
          - [ ] commit-type(scope): Summary of task 2.
            Description of task 2.
  template:
    oneOf:
      - type: string
      - type: object
    default: |
      # Development Protocol #{{ issue.number }}

      - **Type**: {{ form.description }}
      - **Client**: {{ issue.user.md_name }}
      - **Summary**: {{ data.summary }}
      - **Current Status**: {{ status }}
      - **Progress**:
        {{ status_checkbox.triage }}{{ status_checkbox.planning }}{{ status_checkbox.requirement_analysis }}{{ status_checkbox.design }}{{ status_checkbox.implementation }}{{ status_checkbox.testing }}{{ status_checkbox.deploy }}

      {{ pr_list }}

      ## User Requirements Document (URD)

      {{ data.urd }}

      ## Triage

      {{ data.triage }}

      ## Plan

      {{ data.plan }}

      ## Software Requirements Specification (SRS)

      {{ data.srs }}

      ## Software Design Document (SDD)

      {{ data.sdd }}

      ## Implementation

      {{ data.description }}

      ### Task List

      {{ tasklist }}

      ## Testing

      {{ data.testing }}

      ## Deployment

      {{ data.deployment }}

      ## Timeline

      <div align="center">

      {{ timeline }}

      </div>

      {{ references }}
  as_comment:
    type: boolean
    default: false