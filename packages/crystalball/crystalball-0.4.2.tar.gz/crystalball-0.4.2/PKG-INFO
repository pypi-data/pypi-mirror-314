Metadata-Version: 2.1
Name: crystalball
Version: 0.4.2
Summary: Predicts visibilities from a parameterised sky model
License: GPLv2
Author: Paolo Serra and others
Requires-Python: >=3.10,<3.13
Classifier: License :: Other/Proprietary License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Provides-Extra: testing
Requires-Dist: codex-africanus[dask] (>=0.4.1,<0.5.0)
Requires-Dist: dask-ms (>=0.2.23,<0.3.0)
Requires-Dist: loguru (>=0.7.3,<0.8.0)
Requires-Dist: psutil (>=6.1.0,<7.0.0)
Requires-Dist: pytest (>=8.0.0,<9.0.0) ; extra == "testing"
Requires-Dist: regions (>0.9)
Description-Content-Type: text/x-rst

Applicability
=============

Crystalball currently supports prediction from a WSClean list of delta and Gaussian components with (log-) polynomial spectral shape (https://sourceforge.net/p/wsclean/wiki/ComponentList) into the MODEL_DATA column of a measurement set. This is done largely based on code available in the https://github.com/ska-sa/codex-africanus library.

Installation in a virtual environment
=====================================

Crystalball depends on python-casacore which builds from source.
The dependencies mentioned at the following links must be installed
in order for the build to succeed:

- https://github.com/casacore/casacore#building-from-source
- https://github.com/casacore/python-casacore#from-source

Create and activate a Python3 virtual environment

``virtualenv -p python3 <name-of-virtualenv>``

(systems without a Python2 installation don't even need the ``-p python3`` specifier, but it doesn't hurt.)

``source <name-of-virtualenv>/bin/activate``

Pip install crystalball

``pip install <path to crystalball>``

Run crystalball
===============

Activate the virtual environment where you installed codex-africanus, xarray and xarray-ms (see above)

``source <name-of-virtualenv>/bin/activate``

Run crystalball

``crystalball <file.ms> [-h] [-sm SKY_MODEL] [-rc ROW_CHUNKS] [-mc MODEL_CHUNKS] [-f FIELD] [-mf MEMORY_FRACTION] [-w REGION_FILE] [-po] [-ns NUM_BRIGHTEST_SOURCES] [-j NUM_WORKERS] [-o OUTPUT_COLUMN]``

